/***********************************************************************************
*   Class               :       Test_EPMS_FileFielddetails                         *
*   Created Date        :       13/04/2016                                         *           
*   Description         :       Test class for EPMS_FileFielddetails               *
************************************************************************************/

@isTest(SeeAlldata=true)
public class Test_EPMS_FileFielddetails {   
    
    static testMethod void testPositive() {
        
        Profile profile = [select id from Profile where Name = 'System Administrator']; 
        User user = new User();
        user.FirstName ='test';
        user.LastName ='data';
        user.Alias ='cust'; 
        user.Username ='testuser@shinsei.com';
        user.Email='test@gmail.com';
        user.ProfileId  = profile.id;
        user.TimeZoneSidKey='America/Los_Angeles';
        user.LocaleSidKey='en_US';
        user.EmailEncodingKey='UTF-8';
        user.LanguageLocaleKey='en_US';
        insert user;                
        
        Test.startTest();
        List<Production_Order__c> orderNewInfo = [SELECT Id, Name FROM Production_Order__c WHERE Production_Order_Status__c = 'New'];
        system.debug('@@@@2 Order Information : ' + orderNewInfo);
        if(user!=null){
            System.runAs(user){
                //'+orderNewInfo[0]+' - Live
                //00514564 - Full
                string JsonMsg ='{"ProductionOrder":"'+orderNewInfo[0].Name+'","POHierarchy":[{"FileVar":{"Name":"i-6784_2l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784_2l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6784_2l-2.jpg"}},{"FileVar":{"Name":"i-6784_2l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6784_2l.jpg"}},{"FileVar":{"Name":"i-6784l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6784l-2.jpg"}},{"FileVar":{"Name":"i-6784l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6784l.jpg"}},{"FileVar":{"Name":"i-6814l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6814l-2.jpg"}},{"FileVar":{"Name":"i-6814l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6814l.jpg"}},{"FileVar":{"Name":"i-6821l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6821l-2.jpg"}},{"FileVar":{"Name":"i-6821l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6821l.jpg"}},{"FileVar":{"Name":"i-6825l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6825l-2.jpg"}},{"FileVar":{"Name":"i-6825l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6825l.jpg"}},{"FileVar":{"Name":"i-6870l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6870l-2.jpg"}},{"FileVar":{"Name":"i-6870l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6870l.jpg"}},{"FileVar":{"Name":"i-6886l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6886l-2.jpg"}},{"FileVar":{"Name":"i-6886l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6886l.jpg"}},{"FileVar":{"Name":"i-6915l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6915l-2.jpg"}},{"FileVar":{"Name":"i-6915l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6915l.jpg"}},{"FileVar":{"Name":"i-6916l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6916l-2.jpg"}},{"FileVar":{"Name":"i-6916l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6916l.jpg"}},{"FileVar":{"Name":"i-6938l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6938l-2.jpg"}},{"FileVar":{"Name":"i-6938l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6938l.jpg"}},{"FileVar":{"Name":"i-6949l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6949l-2.jpg"}},{"FileVar":{"Name":"i-6949l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6949l.jpg"}},{"FileVar":{"Name":"i-6973l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6973l-2.jpg"}},{"FileVar":{"Name":"i-6973l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/i-6973l.jpg"}}],"statusType":"download"}';
                    RestRequest req = new RestRequest(); 
                RestResponse res = new RestResponse();
                
                req.requestURI = 'https://ap3.salesforce.com/services/apexrest/FilesFieldUpdate';  
                req.httpMethod = 'POST';
                req.requestBody = Blob.valueof(JsonMsg);
                RestContext.request = req;
                RestContext.response = res;
                EPMS_FileFielddetails.doPost();   
            }
            Test.stopTest(); 
        }  
    }
    
    static testMethod void testPositive2() {
        
        Profile profile = [select id from Profile where Name = 'System Administrator']; 
        User user = new User();
        user.FirstName ='test';
        user.LastName ='data';
        user.Alias ='cust'; 
        user.Username ='testuser123456@shinsei.com';
        user.Email='test123456@gmail.com';
        user.ProfileId  = profile.id;
        user.TimeZoneSidKey='America/Los_Angeles';
        user.LocaleSidKey='en_US';
        user.EmailEncodingKey='UTF-8';
        user.LanguageLocaleKey='en_US';
        insert user;                
        
        Test.startTest();     
        
        List<Production_Order__c> orderNewInfo = [SELECT Id, Name FROM Production_Order__c WHERE Production_Order_Status__c = 'New'];
        system.debug('@@@@2222222 Order Information : ' + orderNewInfo);
        List<Files__c> deleteFilesList = [SELECT Id, Name,Production_Order__c,Dir_File_name__c,File_URL__c FROM Files__c WHERE Production_Order__c =: orderNewInfo];
        
        if(user!=null) {
            System.runAs(user) {
                // Full Order : 00573542,
                // Production Order : 00564121,'+orderNewInfo[0].Name+' 
                
                string JsonMsg='{"ProductionOrder":"'+orderNewInfo[0].Name+'","POHierarchy":[{"Folder1/":[{"FileVar":{"Name":"i-6784_2l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2.jpg"}},{"FileVar":{"Name":"i-6784_2l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l.jpg"}},{"FileVar":{"Name":"i-6784l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784l-2.jpg"}},{"FileVar":{"Name":"i-6784l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784l.jpg"}},{"FileVar":{"Name":"i-6814l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6814l-2.jpg"}},{"FileVar":{"Name":"i-6814l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6814l.jpg"}},{"FileVar":{"Name":"i-6821l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6821l-2.jpg"}},{"FileVar":{"Name":"i-6821l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6821l.jpg"}},{"FileVar":{"Name":"i-6825l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6825l-2.jpg"}},{"FileVar":{"Name":"i-6825l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6825l.jpg"}},{"FileVar":{"Name":"i-6870l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6870l-2.jpg"}},{"FileVar":{"Name":"i-6870l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6870l.jpg"}},{"FileVar":{"Name":"i-6886l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6886l-2.jpg"}},{"FileVar":{"Name":"i-6886l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6886l.jpg"}},{"FileVar":{"Name":"i-6915l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6915l-2.jpg"}},{"FileVar":{"Name":"i-6915l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6915l.jpg"}},{"FileVar":{"Name":"i-6916l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6916l-2.jpg"}},{"FileVar":{"Name":"i-6916l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6916l.jpg"}},{"FileVar":{"Name":"i-6938l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6938l-2.jpg"}},{"FileVar":{"Name":"i-6938l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6938l.jpg"}},{"FileVar":{"Name":"i-6949l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6949l-2.jpg"}},{"FileVar":{"Name":"i-6949l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6949l.jpg"}},{"FileVar":{"Name":"i-6973l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6973l-2.jpg"}},{"FileVar":{"Name":"i-6973l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6973l.jpg"}}]}],"statusType":"download"}';
                    RestRequest req = new RestRequest(); 
                RestResponse res = new RestResponse();                
                
                req.requestURI = 'https://ap3.salesforce.com/services/apexrest/FilesFieldUpdate';  
                req.httpMethod = 'POST';
                req.requestBody = Blob.valueof(JsonMsg);
                RestContext.request = req;
                RestContext.response = res;
                EPMS_FileFielddetails.doPost();  
            }
        }
        Test.stopTest(); 
    }
    
    static testMethod void testPositive5() {
        
        Profile profile = [select id from Profile where Name = 'System Administrator']; 
        User user = new User();
        user.FirstName ='test';
        user.LastName ='data';
        user.Alias ='cust'; 
        user.Username ='testuser12@shinsei.com';
        user.Email='test126@gmail.com';
        user.ProfileId  = profile.id;
        user.TimeZoneSidKey='America/Los_Angeles';
        user.LocaleSidKey='en_US';
        user.EmailEncodingKey='UTF-8';
        user.LanguageLocaleKey='en_US';
        insert user;                
        
        Test.startTest();     
        
        List<Production_Order__c> orderNewInfo = [SELECT Id, Name FROM Production_Order__c WHERE Production_Order_Status__c = 'Estimation Request'];
        system.debug('@@@@2222222 Order Information : ' + orderNewInfo);
        List<Files__c> deleteFilesList = [SELECT Id, Name,Production_Order__c,Dir_File_name__c,File_URL__c FROM Files__c WHERE Production_Order__c =: orderNewInfo];
        
        if(user!=null) {
            System.runAs(user) {
                // Full Order : 00573542,
                // Production Order : 00564121,'+orderNewInfo[0].Name+' 
                
                string JsonMsg='{"ProductionOrder":"'+orderNewInfo[0].Name+'","POHierarchy":[{"Folder1/":[{"FileVar":{"Name":"i-6784_2l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2.jpg"}},{"FileVar":{"Name":"i-6784_2l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l.jpg"}},{"FileVar":{"Name":"i-6784l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784l-2.jpg"}},{"FileVar":{"Name":"i-6784l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784l.jpg"}},{"FileVar":{"Name":"i-6814l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6814l-2.jpg"}},{"FileVar":{"Name":"i-6814l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6814l.jpg"}},{"FileVar":{"Name":"i-6821l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6821l-2.jpg"}},{"FileVar":{"Name":"i-6821l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6821l.jpg"}},{"FileVar":{"Name":"i-6825l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6825l-2.jpg"}},{"FileVar":{"Name":"i-6825l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6825l.jpg"}},{"FileVar":{"Name":"i-6870l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6870l-2.jpg"}},{"FileVar":{"Name":"i-6870l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6870l.jpg"}},{"FileVar":{"Name":"i-6886l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6886l-2.jpg"}},{"FileVar":{"Name":"i-6886l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6886l.jpg"}},{"FileVar":{"Name":"i-6915l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6915l-2.jpg"}},{"FileVar":{"Name":"i-6915l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6915l.jpg"}},{"FileVar":{"Name":"i-6916l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6916l-2.jpg"}},{"FileVar":{"Name":"i-6916l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6916l.jpg"}},{"FileVar":{"Name":"i-6938l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6938l-2.jpg"}},{"FileVar":{"Name":"i-6938l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6938l.jpg"}},{"FileVar":{"Name":"i-6949l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6949l-2.jpg"}},{"FileVar":{"Name":"i-6949l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6949l.jpg"}},{"FileVar":{"Name":"i-6973l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6973l-2.jpg"}},{"FileVar":{"Name":"i-6973l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6973l.jpg"}}]}],"statusType":"download"}';
                    RestRequest req = new RestRequest(); 
                RestResponse res = new RestResponse();
                
                req.requestURI = 'https://ap3.salesforce.com/services/apexrest/FilesFieldUpdate';  
                req.httpMethod = 'POST';
                req.requestBody = Blob.valueof(JsonMsg);
                RestContext.request = req;
                RestContext.response = res;
                EPMS_FileFielddetails.doPost(); 
            }
            
        }
        Test.stopTest(); 
    }
    
    static testMethod void testPositive57() {
        
        Profile profile = [select id from Profile where Name = 'System Administrator']; 
        User user = new User();
        user.FirstName ='test';
        user.LastName ='data';
        user.Alias ='cust'; 
        user.Username ='testuser12@shinsei.com';
        user.Email='test126@gmail.com';
        user.ProfileId  = profile.id;
        user.TimeZoneSidKey='America/Los_Angeles';
        user.LocaleSidKey='en_US';
        user.EmailEncodingKey='UTF-8';
        user.LanguageLocaleKey='en_US';
        insert user;                
        
        Test.startTest();     
        
        List<Production_Order__c> orderNewInfo = [SELECT Id, Name,Redo__c FROM Production_Order__c WHERE Production_Order_Status__c = 'New'];
        system.debug('@@@@2222222 Order Information : ' + orderNewInfo);
        List<Files__c> deleteFilesList = [SELECT Id, Name,Production_Order__c,Dir_File_name__c,Redo__c,File_URL__c FROM Files__c WHERE Production_Order__c =: orderNewInfo];
        if(deleteFilesList.size()>0){
            delete deleteFilesList;
        }
        if(user!=null) {
            System.runAs(user) {
                // Full Order : 00573542,
                // Production Order : 00564121,'+orderNewInfo[0].Name+' 
                
                string JsonMsg='{"ProductionOrder":"'+orderNewInfo[0].Name+'","POHierarchy":[{"Folder1/":[{"FileVar":{"Name":"i-6784_2l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l-2.jpg"}},{"FileVar":{"Name":"i-6784_2l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784_2l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784_2l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784_2l.jpg"}},{"FileVar":{"Name":"i-6784l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784l-2.jpg"}},{"FileVar":{"Name":"i-6784l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6784l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6784l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6784l.jpg"}},{"FileVar":{"Name":"i-6814l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6814l-2.jpg"}},{"FileVar":{"Name":"i-6814l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6814l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6814l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6814l.jpg"}},{"FileVar":{"Name":"i-6821l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6821l-2.jpg"}},{"FileVar":{"Name":"i-6821l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6821l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6821l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6821l.jpg"}},{"FileVar":{"Name":"i-6825l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6825l-2.jpg"}},{"FileVar":{"Name":"i-6825l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6825l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6825l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6825l.jpg"}},{"FileVar":{"Name":"i-6870l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6870l-2.jpg"}},{"FileVar":{"Name":"i-6870l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6870l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6870l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6870l.jpg"}},{"FileVar":{"Name":"i-6886l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6886l-2.jpg"}},{"FileVar":{"Name":"i-6886l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6886l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6886l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6886l.jpg"}},{"FileVar":{"Name":"i-6915l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6915l-2.jpg"}},{"FileVar":{"Name":"i-6915l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6915l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6915l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6915l.jpg"}},{"FileVar":{"Name":"i-6916l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6916l-2.jpg"}},{"FileVar":{"Name":"i-6916l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6916l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6916l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6916l.jpg"}},{"FileVar":{"Name":"i-6938l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6938l-2.jpg"}},{"FileVar":{"Name":"i-6938l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6938l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6938l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6938l.jpg"}},{"FileVar":{"Name":"i-6949l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6949l-2.jpg"}},{"FileVar":{"Name":"i-6949l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6949l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6949l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6949l.jpg"}},{"FileVar":{"Name":"i-6973l-2.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l-2.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l-2_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6973l-2.jpg"}},{"FileVar":{"Name":"i-6973l.jpg","currentext":".jpg","Dirfilename":"/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","location":"a0eN0000000tELT","filepreviewurl":"cifs://117.239.57.206:445/share/MBOI/Input/20160224/'+orderNewInfo[0].Name+'/i-6973l.jpg","filethumburl":"http://117.239.57.206:8002/20160224/'+orderNewInfo[0].Name+'/i-6973l_t.jpg","orderid":"'+orderNewInfo[0].Name+'","filestatus":"New","fileurlme":"20160224/'+orderNewInfo[0].Name+'/Folder1/i-6973l.jpg"}}]}],"statusType":"download"}';
                    RestRequest req = new RestRequest(); 
                RestResponse res = new RestResponse();
                
                req.requestURI = 'https://ap3.salesforce.com/services/apexrest/FilesFieldUpdate';  
                req.httpMethod = 'POST';
                req.requestBody = Blob.valueof(JsonMsg);
                RestContext.request = req;
                RestContext.response = res;
                EPMS_FileFielddetails.doPost(); 
            }
            
        }
        Test.stopTest(); 
    }
}