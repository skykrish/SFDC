<apex:page controller="EPMS_POViewDirectory_v1_sort" id="viewPo" tabstyle="Production_Order__c" sidebar="false"> 
    <apex:pageMessages ></apex:pageMessages>
    <apex:stylesheet value="{!URLFOR($Resource.View_Directory,'css/jquery.treeview.css')}" /> 
    <apex:stylesheet value="{!URLFOR($Resource.View_Directory,'css/custom.css')}" /> 
    
    <apex:includeScript value="{!URLFOR($Resource.View_Directory,'js/jquery.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.View_Directory,'js/jquery.treeview.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.View_Directory,'js/jquery-checktree.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.View_Directory,'js/custom.js')}" />
    
    <apex:includeScript value="{!URLFOR($Resource.csspopup,'add-style.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.csspopup,'css-pop.js')}" />
    
    <apex:includeScript value="{!URLFOR($Resource.attendance,'jquery-ui.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.attendance,'gridviewScroll.js')}"/>
    
    <apex:stylesheet value="{!URLFOR($Resource.Classification,'css/defaultTheme.css')}" /> 
    <apex:stylesheet value="{!URLFOR($Resource.Classification,'css/myTheme.css')}" />
    
    <apex:includescript value="{!URLFOR($Resource.Classification,'js/jquery.fixedheadertable.js')}" />
    <apex:includescript value="{!URLFOR($Resource.Classification,'js/custom-table.js')}" /> 
    
    <Style>
        .custPopupbg{ background:rgba(0,0,0,0.7); position:fixed; height:100%; width:100%; top:0; left:0; z-index:999;}
        .custPopup_cnt{
        background-color: #f1f1f1 ;
        border: 1px solid #ddd;       
        z-index: 9999;
        left: 0; right:0; margin:0 auto;
        padding:10px;
        position: absolute;
        width: 300px;
        height: 100px;
        top:115px;   z-index:999;       
        }
        .custPopup_cnt h2 {    border-bottom: 1px solid #ddd !important;
        display: block;
        padding: 8px 10px;
        margin: -10px -10px 10px;
        font-size: 14px;}
        .custPopup_cnt label{     margin-right: 10px; display: inline-block;}
        .text-center{ text-align:center;}
        .custPopup_cnt .btn {
        margin: 5px 5px !important;}
    </style>
    <style>
        .noborder_customtable{border:none !important; margin-bottom:15px !important;}
        .noborder_customtable tr, .noborder_customtable td{ border:none; padding:0;}
        iframe
        {
        width: 0;
        height:0;
        }
        .ml10{ margin-left:10px; }
        .top_custom_table_tdmiddle td{ vertical-align:middle !important;; }
    </style>
    
    <script type="text/javascript">
    var __sfdcSessionId = '{!GETSESSIONID()}';
    </script>
    
    <script src="/soap/ajax/31.0/connection.js" type="text/javascript"></script>
    
    <script>
        function popupCenter(url, name, w, h) {
        // Fudge factors for window decoration space.
        // In my tests these work well on all platforms & browsers.
        w += 32;
        h += 56;
        wleft = (screen.width - w) / 2;
        wtop = (screen.height - h) / 2;
        // IE5 and other old browsers might allow a window that is
        // partially offscreen or wider than the screen. Fix that.
        // (Newer browsers fix this for us, but lets be thorough.)
        if (wleft < 0) {
            w = screen.width;
            wleft = 0;
        }
        if (wtop < 0) {
            h = screen.height-400;
            wtop = 200;
        }
        var win = window.open(url,
                              name,
                              'width=' + w + ', height=' + h + ', ' +
                              'left=' + wleft + ', top=' + wtop + ', ' +
                              'location=no, menubar=no, ' +
                              'status=no, toolbar=no, scrollbars=no, resizable=no');
        // Just in case width and height are ignored
        win.resizeTo(w, h);
        // Just in case left and top are ignored
        win.moveTo(wleft, wtop);
        win.focus();
    }
    
    function callClassifcation(url){
        var paramsW = screen.width-100;
        var paramsH = screen.height-100;
        var params = 'width='+screen.width-100;
        params += ', height='+screen.height-100;
        params += ', top=100, right=100'
        params += ', fullscreen=yes';
        var name = '';
        popupCenter(url, name, paramsW, paramsH);
        
    }    
    
    function Reloadpage(Sucessmessage){
        
        var currentID='{!$CurrentPage.Parameters.Id}';
        
        popup('popUpalert','alert','',Sucessmessage); 
        window.location.assign('/apex/EPMS_PO_ViewDirectory?id='+currentID);
        
    }
    function ReloadVDPage(message){
        popup('popUpalert','alert','',message); 
        location.reload();
    }
    function showpopup1(jobdiv){
        //  $(".blanket-div").show();            
        //document.getElementById(jobdiv).style.display='block';
    }
    
    function showpopup2(jobdiv){        
        //document.getElementById(jobdiv).style.display='block';        
    }
    
    function showpopup3(jobdiv){
        document.getElementById(jobdiv).style.display='block';        
    }        
    
    function showpopup4(jobdiv){
        document.getElementById(jobdiv).style.display='block';        
    }
    
    function showpopup5(jobdiv){
        document.getElementById(jobdiv).style.display='block';        
    }        
    
    function showpopup6(jobdiv){        
        document.getElementById(jobdiv).style.display='block';        
    }
    function updateInstruction(){
        
        var url = encodeURI("/apex/ChangeInstruction"); 
        var width = "520"; 
        var height = "400"; 
        window.open(url, '','scrollbars=no,resizable=no,status=no,toolbar=no,menubar=no, width=' + width + ',height=' + height + ',left=' + ((window.innerWidth - width)/2) + ',top=' + ((window.innerHeight - height)/2) );
        return false;
    }
    
    
    function treeopen()
    {
        setTimeout(function()
                   {
                       //alert("ss");
                       
                   }, 2000);
    }
    
    $(document).ready(function () {
        
        $(".case").removeAttr("checked");
        $("#browser").treeview({
            toggle: function() {
                console.log("%s was toggled.", $(this).find(">span").text());
            }   
        });
        
        
        var winwidth = document.body.clientWidth-140;
        var winheight = window.innerHeight - 350;
        gridviewScroll(winwidth, winheight);
        gridviewScrollauto();
    });
    
    
    
    $(window).resize(function() {
        
        var winwidth = document.body.clientWidth-140;
        var winheight = window.innerHeight - 350;
        gridviewScroll(winwidth, winheight);
    });
    
    
    /*$( '#GridView1Wrapper' ).load(function() {                
                gridviewScrollauto();               
            });*/
    
    $( '#GridView1Wrapper' ).load(function() {  
        location.reload(true);
    });
    
    function gridviewScrollauto()
    {
        
        var winwidth = document.body.clientWidth-140;
        var winheight = window.innerHeight - 350;
        setTimeout(function(){
            gridviewScroll(winwidth, winheight);
        },2000);
    }
    
    function gridviewScroll(winwidth, winheight ) {
        
        gridView1 = $('#GridView1').gridviewScroll({
            width: winwidth,
            height: winheight,
            railcolor: "#F0F0F0",
            barcolor: "#CDCDCD",
            barhovercolor: "#606060",
            bgcolor: "#F0F0F0",
            arrowsize: 30,
            varrowtopimg: "{!URLFOR($Resource.attendance,'Images/arrowvt.png')}",               
            varrowbottomimg: "{!URLFOR($Resource.attendance,'Images/arrowvb.png')}",
            harrowleftimg:"{!URLFOR($Resource.attendance,'Images/arrowhl.png')}",
            harrowrightimg: "{!URLFOR($Resource.attendance,'Images/arrowhr.png')}",       
            headerrowcount: 1,
            railsize: 16,
            barsize: 8,
            
        });
        
        $('#browser').checktree();
    }
    
    
    function openDirectoryJS(obj){
        
        var fileClass = $("input[type='checkbox']:checked").parent().prop('className');
        var errorFlag = false;
        var latestValue = new Array();
        $("input[type='checkbox']:checked").each(function(){
            var val1=$(this).attr('class');
            latestValue.push(val1);                
        });
        
        
        var price = $.map(latestValue, function(value, key) {
            if (value == 'child file')
            {
                errorFlag = true;   
            }
        });
        
        if(errorFlag == false)
        {
            var outputStatus=[];
            var checkedValues = $('.folder:checked').map(function() {
                return this.value;
            }).get();
            
            if(checkedValues==""){
                popup('popUpalert','alert','','Please Select Atleast One folder'); 
                return false;
            }else{
                checkedValues=$("input[type='checkbox']:checked").map(function() {
                    return this.value;
                }).get();
                
                var  output="";
                for (var i = 0, len = checkedValues.length; i<len; i++){
                    if(checkedValues[i]!='on'){                       
                        output += checkedValues[i].substr(0,18)+',';
                        outputStatus.push(checkedValues[i].substring(19));
                    }
                }
                
                CallApexMethod(output);
                
            }
            return false;
        }else{
            popup('popUpalert','alert','','File Types are not allowed');
        }
    }
    
    function openFilesJS(){
        var fileClass = $("input[type='checkbox']:checked").parent().prop('className');
        var errorFlag = false;
        var latestValue = new Array();
        $("input[type='checkbox']:checked").each(function(){
            var val1=$(this).attr('class');
            latestValue.push(val1);                
        });
        
        
        var price = $.map(latestValue, function(value, key) {
            if (value == 'child file')
            {
                errorFlag = true;   
            }
        });
        
        if(errorFlag == false)
        {
            var outputStatus=[];
            var checkedValues = $('.folder:checked').map(function() {
                return this.value;
            }).get();
            
            if(checkedValues!=""){
                popup('popUpalert','alert','','Please Select only Files'); 
                return false;
            }else{
                checkedValues=$("input[type='checkbox']:checked").map(function() {
                    return this.value;
                }).get();
                if(checkedValues==""){
                    popup('popUpalert','alert','','Please Select Atleast one File'); 
                }else{
                    var  output="";
                    for (var i = 0, len = checkedValues.length; i<len; i++){
                        if(checkedValues[i]!='on'){                            
                            output += checkedValues[i].substr(0,18)+',';                          
                            outputStatus.push(checkedValues[i].substring(19));
                        }
                    }
                    CallApexMethod(output);
                }
            } 
        } else{
            popup('popUpalert','alert','','File Types are not allowed');
        }
    }
    
    function JobFilesJS(obj){
        var fileClass = $("input[type='checkbox']:checked").parent().prop('className');
        var errorFlag = false;
        var latestValue = new Array();
        $("input[type='checkbox']:checked").each(function(){
            var val1=$(this).attr('class');
            latestValue.push(val1);                
        });
        
        var price = $.map(latestValue, function(value, key) {
            if (value == 'child file')
            {
                errorFlag = true;   
            }      
        });
        
        if(errorFlag == false)
        {
            var checkedValues="";
            var outputStatus=[];
            checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
            
            var checkedclass = $('.file:checked').map(function() {return this.value;}).get();  
            if(checkedValues==""){
                popup('popUpalert','alert','','Please Select Atleast one record to proceed '); 
                return false;
            }
            if(checkedclass.length>0){
                popup('popUpalert','alert','','Please select file\'s have file type other than Instruction'); 
                return false;
            }
            else{
                var  output="";
                
                for (var i = 0, len = checkedValues.length; i<len; i++){                
                    output += checkedValues[i].substr(0,18)+',';                
                    outputStatus.push(checkedValues[i].substring(19));
                }           
                
                if(output!=''){         
                    $(".blanket-div").show();
                    CallApexJob(output);
                }
                
            }
        }else{
            popup('popUpalert','alert','','File Types are not allowed');
        }
        
    }
    function JobinstrcutionJS(obj){
        var fileClass = $("input[type='checkbox']:checked").parent().prop('className');
        if(fileClass != 'folder'){
            popup('popUpalert','alert','','Please Select folder to proceed'); 
            return false;
        }
        
        var errorFlag = false;
        var latestValue = new Array();
        $("input[type='checkbox']:checked").each(function(){
            var val1=$(this).attr('class');
            latestValue.push(val1);                
        });         
        
        if(errorFlag == false)
        {
            var checkedValues="";
            var outputStatus=[];
            checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
            if(checkedValues==""){
                popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
                return false;
            }else{
                var  output="";
                for (var i = 0, len = checkedValues.length; i<len; i++){
                    if(checkedValues[i]!='on'){
                        output += checkedValues[i].substr(0,18)+',';
                        console.log('OutputID='+output);                    
                        outputStatus.push(checkedValues[i].substring(19));
                    }
                }
                
                if(output!='')
                {   
                    $(".blanket-div").show();
                    CallApexJobInstruction(output);
                }
            }
        }else{
            popup('popUpalert','alert','','File Types are not allowed');
            return false;
        }
        
    }
    
    function vdChnageInstruction(obj){
        var fileClass = $("input[type='checkbox']:checked").parent().prop('className');
        /*if(fileClass == 'folder'){
            popup('popUpalert','alert','','Please Select files to proceed'); 
            return false;
        }*/
        
        var errorFlag = false;
        var latestValue = new Array();
        $("input[type='checkbox']:checked").each(function(){
            var val1=$(this).attr('class');
            latestValue.push(val1);                
        });         
        
        if(errorFlag == false)
        {
            var checkedValues="";
            var outputStatus=[];
            checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
            if(checkedValues==""){
                popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
                return false;
            }else{
                var  output="";
                for (var i = 0, len = checkedValues.length; i<len; i++){
                    if(checkedValues[i]!='on'){
                        output += checkedValues[i].substr(0,18)+',';
                        console.log('OutputID='+output);                    
                        outputStatus.push(checkedValues[i].substring(19));
                    }
                }
                
                if(output!='')
                {   
                    
                    CallApexshowPopupVD(output);
                }
            }
        }else{
            popup('popUpalert','alert','','File Types are not allowed');
            return false;
        }
        
    }
    
    
    
    
    
    
    function QCFilesJS(obj){     
        var fileClass = $("input[type='checkbox']:checked").parent().prop('className');
        var errorFlag = false;
        var latestValue = new Array();
        $("input[type='checkbox']:checked").each(function(){
            var val1=$(this).attr('class');
            latestValue.push(val1);                
        });
        
        var price = $.map(latestValue, function(value, key) {
            if (value == 'child file')
            {
                errorFlag = true;   
            }
        });
        
        if(errorFlag == false)
        {
            var checkedValues="";
            var outputStatus=[];
            checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();     
            if(checkedValues=="" || checkedValues=='on'){
                popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
                return false;
            }else{
                var output='';
                var len = checkedValues.length;
                for (var i = 0; i<len; i++){               
                    output += checkedValues[i].substr(0,18)+',';
                    outputStatus.push(checkedValues[i].substring(19));
                }
                
                if(output!=""){
                    var authorise = false; 
                    var pname='{!$Profile.Name}';                  
                    if(pname == 'システム管理者'){ 
                        authorise = true; 
                    }else if(pname == 'Production Administrator'){ 
                        authorise = true; 
                    } else if(pname == 'Shift Administrator'){ 
                        authorise = true;   
                    } else if(pname == 'Team Leader'){ 
                        authorise = true; 
                    } else if(pname == 'Quality Control'){ 
                        authorise = true; 
                    } 
                        else if(pname == Label.EPMS_MEMBER_DESIG_OPERATOR_PS){ 
                            authorise = false; 
                        } 
                            else if(pname == 'Country Administrator'){ 
                                authorise = true; 
                            }
                    if(authorise == false){ 
                        popup('popUpalert','alert','','{!$Label.EPMS_MBO_Not_have_access}');
                        return false;
                        
                    } 
                    
                    var error = false; 
                    var qcerror = false;
                    console.log('Before for loop error='+error);    
                    for(var j=0;j<outputStatus.length;j++){
                        if(pname == 'Quality Control'){ 
                            if(outputStatus[j] != 'QC'){
                                if(outputStatus[j] != 'QCIP'){
                                    qcerror = true;
                                    break; 
                                }
                            }
                        }
                        if(pname != 'Quality Control'){ 
                            if(outputStatus[j] != 'Redo'){ 
                                if(outputStatus[j] != 'Handover'){ 
                                    if(outputStatus[j] != 'Assigned'){
                                        if(outputStatus[j] != 'QC'){
                                           
                                                error = true;
                                                break; 
                                            
                                        } 
                                    } 
                                } 
                            }
                        }  
                        
                    }
                    console.log('outside if conditon error='+error);
                    if(error){ 
                        popup('popUpalert','alert','','Please select files\'s status have Redo or Handover or Assigned or QC'); 
                    } else if(qcerror){
                        popup('popUpalert','alert','','Please select file / Directory have status QC or QCIP'); 
                    } else{ 
                        
                        
                        var first = true; 
                        var ids ='';
                        for(var i=0;i<checkedValues.length;i++){ 
                            if(first){ 
                                ids+=checkedValues[i].substr(0,18); 
                                first = false; 
                            }else 
                                ids+=','+checkedValues[i].substr(0,18);
                        } 
                        
                        if (ids.length) { 
                            var url2 = 'apex/EPMS_Change_FileQCIncharge?ids='+ids; 
                            window.open(url2, "Change QC : Quality Controller", "scrollbars=1,width=700, height=700"); 
                        } else { 
                            alert('{!$Label.Select_one_or_more_production_order}'); 
                        } 
                    }
                    
                }
                else{
                    popup('popUpalert','alert','','Directory is empty.Please select directory with files');
                }             
            }
        }else{
            popup('popUpalert','alert','','File Types are not allowed');
        }         
    }
    
    function TLFilesJS(obj){
        var fileClass = $("input[type='checkbox']:checked").parent().prop('className');
        var errorFlag = false;
        var latestValue = new Array();
        $("input[type='checkbox']:checked").each(function(){
            var val1=$(this).attr('class');
            latestValue.push(val1);                
        });
        
        
        var price = $.map(latestValue, function(value, key) {
            if (value == 'child file')
            {
                errorFlag = true;   
            }
        });
        
        if(errorFlag == false)
        {
            var checkedValues="";
            var outputStatus=[];
            checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
            if(checkedValues=="" || checkedValues=='on'){
                popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
                return false;
            }else{
                var  output="";
                for (var i = 0, len = checkedValues.length; i<len; i++){
                    output += checkedValues[i].substr(0,18)+',';              
                    outputStatus.push(checkedValues[i].substring(19));
                }
                
                if(output!=""){
                    var authorise = false; 
                    var pname='{!$Profile.Name}';                  
                    if(pname == 'システム管理者'){ 
                        authorise = true; 
                    }else if(pname == 'Production Administrator'){ 
                        authorise = true; 
                    } else if(pname == 'Shift Administrator'){ 
                        authorise = true;   
                    } else if(pname == 'Team Leader'){ 
                        authorise = true; 
                    } 
                        else if(pname == 'Country Administrator'){ 
                            authorise = true; 
                        }            
                            else if(pname == Label.EPMS_MEMBER_DESIG_OPERATOR_PS){ 
                                authorise = false; 
                            } else if(pname == 'Quality control'){ 
                                authorise = false; 
                            } 
                    if(authorise == false){ 
                        popup('popUpalert','alert','','{!$Label.EPMS_MBO_Not_have_access}'); 
                        return false;
                    } 
                    
                    var error = false; 
                    for(var j=0;j<outputStatus.length;j++){
                        if(outputStatus[j] != 'New'){ 
                            if(outputStatus[j] != 'Handover'){ 
                                if(outputStatus[j] != 'Assigned'){
                                    error = true;
                                    break; 
                                }
                            } 
                        } 
                    }
                    console.log('outside if conditon error='+error);
                    if(error){ 
                        popup('popUpalert','alert','','Please select files\'s status have New or Handover or Assigned '); 
                    } 
                    else{  
                        var first = true; 
                        var ids ='';
                        for(var i=0;i<checkedValues.length;i++){ 
                            if(first){ 
                                ids+=checkedValues[i].substr(0,18); 
                                first = false; 
                            }else 
                                ids+=','+checkedValues[i].substr(0,18);
                        } 
                        if (ids.length) { 
                            var url2 = 'apex/EPMS_File_ChangeTLIncharge?ids='+ids; 
                            window.open(url2, "EPMS Team Lead Asssignment : Team Leader", "scrollbars=1,width=700, height=700"); 
                        } else { 
                            alert('{!$Label.Select_one_or_more_production_order}'); 
                        } 
                    }            
                }
                else{
                    popup('popUpalert','alert','','Directory is empty.Please select directory with files');
                } 
            }
        }else{
            popup('popUpalert','alert','','File Types are not allowed');
        }         
    }
    
    function OrderInstDelete(typeOperation){
        if(typeOperation=='ConvertToOrder'){
            var outputStatus=[];
            var checkedValues = $('.folder:checked').map(function() {
                return this.value;
            }).get();
            if(checkedValues!=""){
                popup('popUpalert','alert','','Please Select Only Files');
            }else{
                checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
                if(checkedValues==""){
                    popup('popUpalert','alert','','Please Select Atleast record one to proceed'); 
                    return false;
                }else{
                    var checkSeleted=$("input[type='checkbox']:checked").map(function() { return this.className; }).get();  
                    if(checkSeleted!=""){
                        for (var i = 0, len = checkSeleted.length; i<len; i++){
                            if(checkSeleted[i] =='child fileTypes'){
                                popup('popUpalert','alert','','Please Select instruction record to proceed'); 
                                return false;
                            }
                        }
                    }
                    var  output="";
                    for (var i = 0, len = checkedValues.length; i<len; i++){
                        if(checkedValues[i]!='on'){
                            output += checkedValues[i].substr(0,18)+',';                              
                            outputStatus.push(checkedValues[i].substring(19));
                        }
                    }
                    CallApexMethodconvertToOrder(output);
                }
                
            }
        }else if(typeOperation=='ConvertToInstruction'){
            var outputStatus=[];
            checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
            if(checkedValues==""){
                popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
                return false;
            }
            if(checkedValues!=""){
                
                console.log('Checked values are :' + checkedValues ); 
                var checkSeleted=$("input[type='checkbox']:checked").map(function() { return this.className; }).get();  
                if(checkSeleted!=""){
                    for (var i = 0, len = checkSeleted.length; i<len; i++){
                        if(checkSeleted[i] =='file'){
                            popup('popUpalert','alert','','Please select image/Instruction record to proceed'); 
                            return false;
                        }
                    }
                }
                checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
                if(checkedValues==""){
                    popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
                    return false;
                }else{
                    var output="";
                    for (var i = 0, len = checkedValues.length; i<len; i++){
                        if(checkedValues[i]!='on'){
                            output += checkedValues[i].substr(0,18)+',';                            
                            outputStatus.push(checkedValues[i].substring(19));
                        }   
                    }
                    
                    
                    if(output!=""){
                        
                        var error = false; 
                        for(var j=0;j<outputStatus.length;j++){
                            if(outputStatus[j] == 'QC' || outputStatus[j] == 'QCIP'){                                   
                                error = true;
                                break; 
                            } 
                        }
                        if(error){ 
                            popup('popUpalert','alert','','Please select files\'s have status other than QC or QCIP'); 
                        }else{
                            convertToInstrFile(output);
                        } 
                        
                        
                    }
                    
                }
                
            }
            
        }
            else if(typeOperation=='Delete'){
                checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
                var outputStatus=[];
                if(checkedValues==""){
                    popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
                    return false;
                }else{
                    var  output="";
                    for(var i = 0, len = checkedValues.length; i<len; i++){
                        if(checkedValues[i]!='on')
                        {
                            output += checkedValues[i].substr(0,18)+',';                                
                            outputStatus.push(checkedValues[i].substring(19));
                        }
                    }
                    var result = popup('popUpalert','confirm','','Are you surely want to delete?'); 
                    
                    $(".butttonlist a").click(function(){
                        if($(this).html()=='OK')
                        {
                            deleteFiles(output);
                        }else{
                            var popupbox = document.getElementById('popUpConfirm');
                            var blonkerBox = document.getElementById("blanket");
                            popupbox.parentNode.removeChild(popupbox);
                            blonkerBox.parentNode.removeChild(blonkerBox);
                        }
                    });
                    
                    $("#close").click(function()
                                      {
                                          var popupbox = document.getElementById('popUpConfirm');
                                          var blonkerBox = document.getElementById("blanket");
                                          popupbox.parentNode.removeChild(popupbox);
                                          blonkerBox.parentNode.removeChild(blonkerBox);                      
                                      });
                    
                }
            }
    }
    
    
    function showInstPopUp(isMemberExist){
        var isMemExist=false;
        if(isMemberExist =='true'){
            isMemExist=true;
        }else{
            isMemExist=false;
        }
        
        if(isMemExist){
            $('.convertInstruction').show();
            
        }else{
            convertToInstructMember();
        }
        
    }
    function cancelConvertInst(){
        $('.convertInstruction').hide();        
    }
    
    function showTLWindow(id){
        var url = encodeURI("/apex/EPMS_ChangeTLIncharge?Id="+id); 
        var width = "520"; 
        var height = "400"; 
        window.open(url, '','scrollbars=no,resizable=no,status=no,toolbar=no,menubar=no, width=' + width + ',height=' + height + ',left=' + ((window.innerWidth - width)/2) + ',top=' + ((window.innerHeight - height)/2) );
        return false;
        
    } 
    function SuccessFully(Msg) {
        $('.convertInstruction').hide();
        popup('popUpalert','alert','',Msg); 
    }
    function SuccessFullyDelete(Msg) {
        popup('popUpalert','alert','',Msg);
        location.reload();        
    }
    
    
    function closeInstructionPopup()
    {
        
        $('#VDFolPop').hide();
        location.reload();  
    }
    
    function setWinSize(){
        var winwidth = document.body.clientWidth-160;
        //var winheight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
        var winheight = window.innerHeight-250;
        
        $(".freezeTableAutoWidth").css('width', winwidth+"px");      
        
        $('.headerFreezeTable').fixedHeaderTable({ altClass: 'odd', height:winheight+"px"});            
        $('.headerFreezeTable th.last').css('padding-right', '0px');
        
        //$(".freezeTableAutoWidth").css('height', b);        
    }    
    
    $(document).ready(function() {  
        setWinSize();
        
        setTimeout(function(){
            $(".sortListAsc").focus();
        },2000);
        
    });
    
    $(window).load(function(){
        var array = new Array();
        $('.thumbImageBody').each(function() {
            var a = $(this).width();
            //alert($(this).width());
            array.push(a);
        });
        var maxWidth = Math.max.apply(Math, array);
        //alert (maxWidth); 
        $('#thumbImageHeader .fht-cell').css('width',(maxWidth+1) + "px");
        //alert($('#thumbImageHeader').width());
    });
    
    
    </script>   
    <style type="text/css">
        .body .bPageBlock
        {
        margin-bottom:0px;
        }
        .penalityTableSec table{  margin-bottom:0;}
        body .bodyDiv #bodyTable {padding:0;}
        table.pagefooter
        {
        background:#f2f3f3;
        border:1px solid #e0e3e5;
        border-top:0px solid #e0e3e5;
        padding:0px;
        margin:0;
        }
        
        #GridView1Wrapper {margin-bottom:20px;}
        .paginationNav{ width:100%;}
        table.pagefooter td{
        border:0px;
        vertical-align: middle;
        }
        table.pagefooter td.lefttd
        {
        text-align:left !important;
        }
        table.pagefooter td:last-child
        {
        text-align:right !important;
        }
        .NOFPage input
        {
        width:20px;
        }
        
        body .bRelatedList .pbBody table.list, body .apexp .pbBody table.list {border:0;}
        body .pbBody table.list tr th, body .pbBody table.list tr td 
        {   
        border-width:0 1px 0 0;
        border-color:#ECECEC;
        border-style:solid;
        }
        
        
        table.list
        {
        background-color: #fff;
        border-top: 0px solid #e0e3e5;
        }
        .list td, .list th, body.oldForecast .list .last td, body.oldForecast .list .last th {
        /*padding: 10px 2px 0px 5px;*/
        color: #000;
        padding:2px 2px;
        vertical-align:middle;
        }
        .GridviewScrollHeader
        {
        background: #f2f3f3;
        border-width: 0 0 1px 1px;
        border-color: #e0e3e5;
        color: #000;
        font-size: .9em;
        font-weight: bold;
        padding: 4px 2px 4px 5px;
        }
        .pbBody, .pbBody a, .pbBody td, .lbBody a, .lbBodyDescription, .list .headerRow .noRowsHeader {
        color: #000;
        }
        .pbBody table.list tr.dataRow td:first-child {
        border-left-width: 0;
        }
        table.list tr.dataRow td {
        border-width: 0 0 1px 0;
        vertical-align: middle;
        text-align:left;
        
        }
        #GridView1Wrapper table td.zen-deemphasize{ vertical-align:middle;}
        #GridView1Wrapper table td{ padding:0 10px;  word-break: break-all;}
        .GridviewScrollHeader td {
        border-right:0px solid #ededed;
        white-space:nowrap;
        
        }
        .list-custom {
        margin: 0px;
        float: left;
        border: 0px solid #ededed;
        } 
        
        .apexp .bPageBlock.apexDefaultPageBlock.pbBody {width:100%; margin:0px 0; float:left;}
        
        .jobtitle {
        display:none; 
        background: #fff none repeat scroll 0 0;
        border: 1px solid #ccc;
        min-height: 510px;
        left: 50%;
        margin-left: -250px;
        /*margin-top: -265px;*/
        padding: 10px;
        position: fixed;
        top:0;
        width: 500px;
        z-index: 999;
        border-radius: 3px;
        box-shadow: 0 0 5px 1px #ccc;
        -webkit-border-radius: 3px;
        -webkit-box-shadow: 0 0 5px 1px #ccc;
        -moz-border-radius: 3px;
        -moz-box-shadow: 0 0 5px 1px #ccc;
        }
        .jobtitlefolder {
        display:none; 
        background: #fff none repeat scroll 0 0;
        border: 1px solid #ccc;
        min-height: 158px;
        left: 50%;
        margin-left: -250px;
        margin-top: -79px;
        padding: 10px;
        position: fixed;
        top:25%;
        width: 500px;
        z-index: 999;
        border-radius: 3px;
        box-shadow: 0 0 5px 1px #ccc;
        -webkit-border-radius: 3px;
        -webkit-box-shadow: 0 0 5px 1px #ccc;
        -moz-border-radius: 3px;
        -moz-box-shadow: 0 0 5px 1px #ccc;
        }
        .jobtitlegraybox
        {
        position:fixed;
        left:0;
        top:0;
        right:0;
        bottom:0;
        }
        .closejobtitle
        {
        background: #605F61 none repeat scroll 0 0;
        border-radius: 40px;
        color: #fff !important;
        display: block;
        float: right;
        font-weight: bold;
        padding: 3px;
        position: absolute;
        right: -10px;
        text-align: center;
        top: -10px;
        width: 15px;
        text-decoration:none;
        }
        .jobtitleHd
        {
        font-weight:bold;
        }
        
        .filetree li span {color:#000}
        .text-left
        {
        text-align:left !important;
        }
        body .pbBody table.list tr.dataRow th, body .pbBody table.list tr.dataRow td
        {
        border-left:1px solid #ECECEC;
        }
        
        .filetree span.folder:hover {cursor:pointer;}
        
        #blanket {position:fixed;}
        .popUpDiv {position:fixed;}
        
        
        .ontop {
        z-index: 999;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;        
        position: fixed;                
        background-color: #000;
        color: #000;
        opacity: .8;
        filter: alpha(opacity = 50);
        }
        
        #popupStatus {
        width: 385px;
        /*height: 200px;*/
        position: fixed;
        z-index: 999;
        color: #000000;
        /*background-color: #ffffff;*/
        top: 50%; /* To align popup window at the center of screen*/
        left: 50%;
        margin-top: -100px;
        margin-left: -150px;
        }
        
        #popupStatus .pbTitle
        {
        width:100%;
        }
        .ontop .btn {color:#000;}
        
        .changeExtBtnStatusSec {width:32%; margin:0 auto; overflow:hidden;}
        .changeExtBtnStatusSec input {float:left; margin-right:10px;}
        
        .convertInstruction{
        display:none;
        }
        .blanket-div {
        width: 100%;
        background: #000;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 99;
        opacity: 0.5;
        }
        
        .tblCustom td
        {
        vertical-align:top;
        }
        .lefttblPart
        {
        position:relative;
        width:70px;
        }
        .lefttblPart_select
        {
        padding:0 !important;
        border: 1px #fff solid;
        width:0px;
        }
        .indicator_lefttbl
        {
        position: absolute;
        right: 0;
        background: url(/resource/1456595250000/SidebarImage) 0 124px;
        height: 31px;
        border-radius: 97px; 
        width: 9px;
        margin-top:2px;
        }
        .indicator_lefttbl:hover
        {
        background: url(/resource/1456595250000/SidebarImage) 0 93px
        }
        .indicator_lefttblSelect
        {
        background: url(/resource/1456595250000/SidebarImage) 0 186px !important;
        }
        .indicator_lefttblSelect:hover
        {
        background: url(/resource/1456595250000/SidebarImage) 0 155px !important;
        }
        
        ul.leftmenu
        {
        width:90px;
        }
        ul.leftmenu li
        {
        padding:0;
        margin-bottom: 1px;
        margin-left: 0px;
        }
        ul.leftmenu li a
        {
        padding-top: 75px !important;
        text-decoration: none;
        color:#1D647B;
        padding-bottom: 10px !important;
        }
        ul.leftmenu li a.iconOrderFile_1, ul.leftmenu li a.iconOrderFile_1:hover
        {
        padding: 0px;
        text-align:center;
        background-position: center 5px !important;
        background-size: 70px;
        background-color:#cee5ed;
        }
        ul.leftmenu li a.iconOrderinfo_1, ul.leftmenu li a.iconOrderinfo_1:hover
        {
        padding: 0px;
        text-align:center;
        background-position:center 5px !important;
        background-size: 70px;
        background-color:#e2eef2;
        }
        ul.leftmenu li a.iconClassification_1, ul.leftmenu li a.iconClassification_1:hover
        {
        padding: 0px;
        text-align:center;
        background-position:center 5px !important;
        background-size: 70px;
        background-color:#ecf2f4;
        }
        ul.leftmenu li a.iconDir_1, ul.leftmenu li a.iconDir_1:hover
        {
        padding: 0px;
        text-align:center;
        background-position:center 5px !important;
        background-size: 70px;
        background-color:#f6f6f6;
        }
        ul.leftmenu li a:hover, 
        {
        color:#fff;
        }
        body .bPageBlock .pbBody
        {
        overflow:hidden;
        }
        
        .tblPartOrderFile{
        width: 100%;
        margin-bottom:0;
        }
        
        .child.collapsable span.fileTypes:first-child
        {
        color:#9C0606 !important;
        font-weight:normal;    
        
        }
        .child.collapsable span.fileTypes
        {
        color:#1B2EC3 !important;
        font-weight:bold;
        
        }
        
        
        
        /******************** Grid View****************************/
        #Grid_View{display:none;}
        .productImage {
        text-align:center;
        width:100%;
        overflow:hidden;
        vertical-align:top;
        margin:10px 5px;
        height:124px;
        }
        .productImage img{
        max-width: 100%;
        height:120px;
        border:2px solid #ddd;
        }
        .productSelect{
        width: 0;
        height: 0;
        border-style: solid;
        border-width:0 50px 50px 0;
        border-color: transparent #d8ebf2 transparent transparent;
        position:absolute;
        right:0;
        top:0;
        }
        .prodCheckBox {
        /* display: table-cell;*/
        padding:0;
        width: 20px;
        position:absolute;
        right: -46px;
        top: 3px;   
        }
        .productDetailsList {
        /*display: table-cell;*/
        padding: 5px;
        }
        .productDetails{ background:#d8ebf2; width:100%;}
        .productDetails ul{ margin:0; padding:0; width:100%; }
        .productDetails ul li{ margin:0; padding:3px 0 3px 0; width:100%; list-style: none; line-height:18px; color:#585858; overflow:hidden;  text-overflow: ellipsis;white-space: nowrap;}
        .productDetails .productName{
        background: #1796bf none repeat scroll 0 0;
        color: #fff;
        font-size: 14px;
        text-align: center;
        padding:2px;
        }
        .productDetails ul li span{Color:#000;}
        .productDetails ul li span.productNameLable{
        color:#585858;
        }
        
        
        .refreshListButton {
        background-position: 2px 3px;
        background-position-x: 2px;
        background-position-y: 3px;
        background: url(/resource/1457288657000/refresh) 1px 2px no-repeat !important;
        width: 22px;
        
        }
        .refreshListButton:hover {
        background-position: 2px 3px;
        background-position-x: 2px;
        background-position-y: 3px;
        background: url(/resource/1457288657000/refresh) 1px -20px no-repeat !important;
        width: 22px;
        
        }
        .productImage {
        text-align:center;
        width:100%;
        overflow:hidden;
        vertical-align:top;
        margin:10px 5px;
        height:124px;
        }
        .productImage img{
        max-width: 100%;
        height:120px;
        border:2px solid #ddd;
        }
        .productSelect{
        width: 0;
        height: 0;
        border-style: solid;
        border-width:0 50px 50px 0;
        border-color: transparent #d8ebf2 transparent transparent;
        position:absolute;
        right:0;
        top:0;
        }
        .prodCheckBox {
        /* display: table-cell;*/
        padding:0;
        width: 20px;
        position:absolute;
        right: -46px;
        top: 3px;   
        }
        .productDetailsList {
        /*display: table-cell;*/
        padding: 5px;
        float:left; background:#d8ebf2; 
        width:270px;
        }
        .productDetails{ background:#d8ebf2; width:100%;}
        .productDetails ul{ margin:0; padding:0; width:100%; }
        .productDetails ul li{ margin:0; padding:3px 0 3px 0; width:100%; list-style: none; line-height:18px; color:#585858; overflow:hidden;  text-overflow: ellipsis;white-space: nowrap;}
        .productDetails .productName{
        background: #1796bf none repeat scroll
        color: #fff;
        font-size: 14px;
        text-align: center;
        padding:2px;
        }
        .productDetails ul li span{Color:#000;}
        .productDetails ul li span.productNameLable{
        color:#585858;
        }
        .colBox{ width:280px; float:left; border:2px solid #ddd; margin:10px 5px; position:relative;}
        .colBox.selectProduct{ border:2px solid #047a60}
        .colBox.selectProduct .productSelect{ 
        border-style: solid;
        border-width:0 50px 50px 0;
        border-color: transparent #047a60 transparent transparent;
        }
        .productDetails ul li.jobNameHeight{ float:left; height:25px; overflow:hidden; position:relative}
        .dotdotdot{ position:absolute; right:0; bottom:0; color:#000;}
        
        @media screen and (max-width: 1920px) and (min-width: 1910px) {
        .colBox{ width:275px;}
        .productDetailsList { width:265px;}
        }
        @media screen and (max-width: 1280px) and (min-width: 1270px) {
        .colBox{ width:258px;}
        .productDetailsList { width:248px;}
        }
        
        
        /****Tooltip*****/
        
        .ui-tooltip {
        padding: 8px;
        position: absolute;
        z-index: 9999;
        max-width: 300px;
        }
        .ui-widget-content {
        background: #33a1c5 none repeat scroll 0 0;
        border: 1px solid #1497c1;
        color:#fff;
        line-height:18px;
        }
        body .bPageBlock
        {
        margin-bottom:0;
        }
        
        .splitedfiles{color:#F919C7 !important;}
        
        .topPagination
        {
        border:0px !important;
        }
        .topPagination td
        {
        border:0px !important;
        }
        
        .legend-content {
        float: right;
        width: auto;
        }
        .legend-content ul {
        float: right;
        list-style: outside none none;
        margin: 0 0 5px;
        padding: 0;
        }
        .legend-content ul li {
        color: #808080;
        float: left;
        font-size: 12px;
        margin: 0 15px 0 0;
        }
        .legend-content ul li em {
        float: left;
        height: 8px;
        margin: 2px 5px 0 0;
        width: 8px;
        }
        .splitedColor em {
        background: #F919C7 none repeat scroll 0 0;
        border: 1px solid #F919C7;
        }
        .copyColor em {
        background: #9C0606 none repeat scroll 0 0;
        border: 1px solid #9C0606;
        }
        .parentColor em{
        background: #1B2EC3 none repeat scroll 0 0;
        border: 1px solid #1B2EC3;
        }
        /****noSidebarCell*/
        .noSidebarCell{ padding:10px 0;}
        
    </style>
    <style type="text/css">
        /*
        BODY,TD
        {
        font-family: Arial,Helvetica,sans-serif;
        color: #000;
        font-size: 85%;
        }*/
        
        .orderClassificationSec {}     
        .tableTopSec h3 {color:#000; font-size:16px; clear:both;}       
        .tableTopSec td {padding:5px 2px;}
        .tableTopSec td.font14 {font-size:14px; padding:10px 2px;}
        .divider {margin-top:0;} 
        /*
        .fancyTable thead tr th, .fancyTable thead tr td, .fancyTable tfoot tr th, .fancyTable tfoot tr td {
        background:#F3F3F3;
        } 
        .fancyTable td, .fancyTable th {
        border:1px solid #E6E6E6;
        }
        */
        .fancyTable {border-collapse:collapse;}
        .fancyTable.leftRight_text tbody tr td:first-child {text-align:left;}
        .fancyTable.leftRight_text tbody tr td:last-child {text-align:right;}        
        .colBox
        {
        width:320px;
        margin:5px 5px;
        min-height: 290px;
        }
        .productDetailsList
        {
        width: 310px;
        }
        .productName a
        {
        word-break: break-all;
        display: block;
        min-height: 30px;
        padding: 2px;
        }
        .productImage
        {
        width:97%;
        }
        .topPagination.padding_top_btm {padding:10px 0;}
        .topPagination.padding_top_btm td {text-align:left;}
        .topPagination.padding_top_btm td:last-child {text-align:right; padding-right:2%;}
        
        
    </style>
    <script type="text/javascript">
    $(function(){
        
        $('.pbBody').each(function(){  
            
            var highestBox = 0;
            $('.productDetails', this).each(function(){
                
                if($(this).height() > highestBox) 
                    highestBox = $(this).height(); 
            });  
            
            $('.productDetails',this).height(highestBox);
            
        });    
    });
    </script>
    
    <script type="text/javascript">
    
    $(function(){
        
        $('input[type=checkbox]').click(function() {
            if(this.checked == true) {      
                $(this).closest('.colBox').addClass('selectProduct');
            } else {
                $(this).closest('.colBox').removeClass('selectProduct');
            }
        });
        
        $(".switchView li a").on("click", function(){   
            $(this).parent('li').addClass('active').siblings().removeClass('active');
            //$(this).parent('li').addClass("active");
        });
        
        
        $("#selectall_Copy").click(function () {
            
            $("input:checkbox").prop('checked', $(this).prop("checked"));
            $("input:checkbox").attr('checked', $(this).attr("checked"));
            
        });
        $(".case").click(function(){
            if($(".case").length == $(".case:checked").length) {
                $("#selectall_Copy").prop('checked', true);
                
            } else {
                $("#selectall_Copy").removeAttr("checked");
            }
            
        });
        
        var flag = false;
        
        $(".indicator_lefttbl").on("click",function(){
            
            if(flag == true)
            {
                //winwidth = screen.width - 175;
                
                // winheight = screen.height- 300;
                var winwidth = document.body.clientWidth-175;
                var winheight = window.innerHeight - 350;
                gridviewScroll(winwidth, winheight);
                flag = false;            
            }else
            {
                flag = true;
                // winwidth = screen.width - 94;
                //winheight = screen.height- 300;
                var winwidth = document.body.clientWidth-94;
                var winheight = window.innerHeight - 350;
                gridviewScroll(winwidth, winheight);            
                
            }
            
            $(".leftmenu").toggle();
            $(this).toggleClass("indicator_lefttblSelect");
            $(".lefttblPart").toggleClass("lefttblPart_select");          
        });
    });
    function closeBg()
    {
        $(".blanket-div").hide();
        location.reload();
    }
    
    function DisplayList()
    {
        $("#Grid_View").hide(); 
        $("#List_View").show(); 
        DisplayListAction();  
    }
    
    function DisplayGrid()
    {
        $("#List_View").hide();  
        $("#Grid_View").show(); 
        DisplayGridAction();
    }
    
    function gridviewScrollautoNew()
    {
        var winwidth = document.body.clientWidth-175;
        var winheight = window.innerHeight - 350;
        //var winwidth = screen.width - 175;
        //  var winheight = screen.height- 300;
        gridviewScroll(winwidth, winheight);
    }
    var flags = false;
    
    function checkCheckboxes()
    {
        if(flags == false)
        {
            $(".case").prop("checked", true);
            flags = true;  
        }else{
            $(".case").prop("checked", false);
            flags = false;
        }   
    }
    </script>
    
    <script type="text/javascript">
    
    function Vfpage()
    {
        var outputStatus=[];
        var checkSeleted=$("input[type='checkbox']:checked").map(function() { return this.className; }).get();  
        console.log('Selected Ins' + checkSeleted); 
        if(checkSeleted!=""){
            for (var i = 0, len = checkSeleted.length; i<len; i++){
                console.log('File Type ='+checkSeleted[i]);
                if(checkSeleted[i] =='Child file'){
                    popup('popUpalert','alert','','Please select instruction/images record to proceed'); 
                    return false;
                } 
            }
        } 
        var checkedValues=$("input[type='checkbox']:checked").map(function() { return this.value; }).get();
        if(checkedValues==""){
            popup('popUpalert','alert','','Please Select Atleast one record to proceed'); 
            return false;
        }else{
            var  output="";
            for (var i = 0, len = checkedValues.length; i<len; i++){
                // output += checkedValues[i]+',';
                if(checkedValues[i]!='on'){
                    output += checkedValues[i].substr(0,18)+',';
                    console.log('OutputID='+output);
                    
                    outputStatus.push(checkedValues[i].substring(19));
                    console.log('outputStatus='+outputStatus);
                }   
            }
            console.log('OutputID='+output);
            console.log('outputStatus='+outputStatus);
            
            if(output!=""){
                
                var error = false;
                var assigned = false;
                console.log('Before for loop error='+error);    
                
                if(error){                  
                    popup('popUpalert','alert','','Please select files\'s only Order instruction'); 
                }else{  
                    
                    if(assigned){
                        
                        
                    } else {
                        var url2 = '/apex/EPMS_instructiontree?instruction=' +output+'&id={!orderID}&type=basepath'; 
                        window.open(url2, "EPMS Order Assignment : Anken", "scrollbars=1,width=800, height=600,resizable=0,titlebar=0,toolbar=0,status=0"); 
                        
                    }
                }                               
                
            }
            
        }
    }
    </script>
    
    <script type="text/javascript">
    var rootflog = false;
    var count;
    function selectAll(){
        if(rootflog == false)
        {
            $('.fancyTable tbody tr').find('.childs').prop('checked', 'checked');
            rootflog=true;
            count = $(".childs:checked").length;    
            jQuery('[id$=myPlaceholder]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF'); 
            jQuery('[id$=myPlaceholder2]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF');
        }
        else{
            $('.fancyTable tbody tr').find('.childs').removeProp('checked', 'checked');
            rootflog=false;
            count = $(".childs:checked").length;    
            jQuery('[id$=myPlaceholder]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF'); 
            jQuery('[id$=myPlaceholder2]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF');    
        }
        
    }
    
    $(document).ready(function() {
        $(document).on("click", "#checkall", function(){
            $('.fancyTable tbody tr').find('.childs').prop('checked', this.checked);
            count = $(".childs:checked").length;    
            jQuery('[id$=myPlaceholder]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF');
            jQuery('[id$=myPlaceholder2]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF');
        });
        
        
        $(".childs").on('change',function(){
            var counts = $('.childs:checked').length;
            var all_count=$('.fancyTable tbody tr').find(":checkbox").length;
            
            if(counts < all_count){
                $('#checkall').prop('checked',false);
            }
            else{
                $('#checkall').prop('checked',true);
                
            }
            
            count = $(".childs:checked").length;    
            jQuery('[id$=myPlaceholder]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF');
            jQuery('[id$=myPlaceholder2]').text(count);
            if(count>0)
                jQuery('[id$=count]').css('background','#ffe324');
            else
                jQuery('[id$=count]').css('background','#FFF');
        });  
    });
    
    
    function validatepopup(){
    console.log('entered in validatepopup');
        var profilename = '{!$Profile.Name}'; 
        if(profilename == 'Team Leader' || profilename == 'Operator PS' || profilename == 'Shift Administrator' || profilename == 'Quality Control' ){ 
            alert('{!$Label.EPMS_MBO_Not_have_access}'); 
        } else {
        console.log('entered popupalert');
            popup('popUpalert','confirm','','Are you sure?'); 
            $(".butttonlist a").click(function(){
                if($(this).html()=='OK')
                {
                    statusproceed();
                    var popupbox = document.getElementById('popUpConfirm');
                    var blonkerBox = document.getElementById("blanket");
                    popupbox.parentNode.removeChild(popupbox);
                    blonkerBox.parentNode.removeChild(blonkerBox);$(".blanket-div").hide();
                }else{ 
                    var popupbox = document.getElementById('popUpConfirm');
                    var blonkerBox = document.getElementById("blanket");
                    popupbox.parentNode.removeChild(popupbox);
                    blonkerBox.parentNode.removeChild(blonkerBox);$(".blanket-div").hide();
                }
            });
            $("#close").click(function()
                              {
                                  var popupbox = document.getElementById('popUpConfirm');
                                  var blonkerBox = document.getElementById("blanket");
                                  popupbox.parentNode.removeChild(popupbox);
                                  blonkerBox.parentNode.removeChild(blonkerBox);                      
                              });
            
        }
    }
    </script>
    <apex:pageBlock rendered="{!NOT(viewDirectory) && NOT(classification) && NOT(orderInformation) && NOT(orderFiles)}" > 
        <script type="text/javascript">
        methodOneInJavascript();
        </script>
    </apex:pageBlock>    
    
    <apex:form >
        <apex:pageMessages ></apex:pageMessages>
        <apex:actionFunction action="{!getdisplayOrderFiles2}" name="methodOneInJavascript" oncomplete="gridviewScrollautoNew();"></apex:actionFunction> 
    </apex:form>
    
    <apex:form >
        <div class="convertInstruction">
            <div id="popDiv" class="ontop"></div>
            <div id="popupStatus">
                <apex:outputPanel id="changeInstId">                    
                    <apex:pageblock >
                        Already member has been assigned to selected files.<br/><br/>                    
                        Do you want to convert as instruction type of file ?
                        <div class="changeExtBtnStatusSec">   
                            <apex:commandButton value="Yes" action="{!convertToInstructMember}" onComplete="SuccessFullyDelete('{!updateStatus}');"  /> &nbsp;&nbsp;
                            <apex:commandButton value="No" onclick="cancelConvertInst()" rerender="testRefreshId" />
                        </div>
                        
                    </apex:pageblock>                 
                </apex:outputPanel>                
            </div>
        </div>
        <apex:outputPanel id="testRefreshId"> 
        </apex:outputPanel>
        
        <apex:actionFunction name="CallmyApexMethods" action="{!refreshOrderFilesPage}" oncomplete="DisplayOrderFiles()"/>
        <apex:actionFunction name="DisplayOrderFiles" action="{!getdisplayOrderFiles2}"/>
        <html> 
            <body>
                <table border="1" width="100%" class="tblCustom">
                    <tr>
                        <td class="lefttblPart">
                            
                            <span class="indicator_lefttbl"></span>
                            <ul class="leftmenu">
                                
                                
                                <li><apex:commandlink styleClass="{!IF(orderFiles,'iconOrderFile_active','iconOrderFile_1')}" value="Order Files" onclick="CallmyApexMethods()"  />
                                </li>
                                <li><apex:commandlink styleClass="{!IF(orderInformation,'iconOrderinfo_active','iconOrderinfo_1')}"  value="Order Information" action="{!orderInformation}" />
                                </li>
                                <li><apex:commandlink styleClass="{!IF(classification,'iconClassification_active','iconClassification_1')}" value="Classification" action="{!filterByStatus}"/> <!-- action="{!ViewClassification}" -->
                                </li>
                                <li><apex:commandlink styleClass="{!IF(viewDirectory,'iconDir_active','iconDir_1')}" value="Folder Tree" action="{!parentChildNodes}"/></li>    
                                
                            </ul>
                        </td>
                        <td>
                            <!--  -->
                            
                            <apex:outputPanel id="changeTLPopup"  style="display:none;" styleClass="jobtitle">
                                <apex:outputPanel id="TLInnerOutputPnl"  styleClass="customPopup" layout="block"  rendered="{!displayChangeTLPopUp}">
                                    <apex:pageBlock > 
                                        <apex:pageblockSection > 
                                            <apex:pageblocksectionItem >
                                                <apex:outputText value="Shift" />
                                                <apex:selectList value="{!selShift}" size="1" multiselect="false">
                                                    <apex:actionSupport event="onchange" action="{!changeShift}"  rerender="selTeamForShiftId"/>
                                                    <apex:selectOptions value="{!shiftNames}" />
                                                </apex:selectList>
                                                
                                            </apex:pageblocksectionItem> 
                                            <apex:pageblocksectionItem >
                                                <apex:outputText value="Avaiable Team" />
                                                <apex:outputPanel id="selTeamForShiftId" >
                                                    <apex:selectList value="{!selTeam}" size="1" multiselect="false">
                                                        <apex:actionSupport event="onchange" action="{!changeTeam}" rerender="selTlForShiftId" />
                                                        <apex:selectOptions value="{!teamNames}" />
                                                    </apex:selectList>
                                                </apex:outputPanel>
                                            </apex:pageblocksectionItem>
                                            <apex:pageblocksectionItem >
                                                <apex:outputText value="Select TL Name" />
                                                <apex:outputPanel id="selTlForShiftId" >
                                                    <apex:selectList value="{!selTL}" size="1" multiselect="false">
                                                        <apex:selectOptions value="{!TLNames}" />
                                                    </apex:selectList>
                                                </apex:outputPanel>
                                            </apex:pageblocksectionItem>
                                        </apex:pageblockSection>
                                        <apex:commandButton value="Submit" action="{!saveChanges}" styleClass="closeButton" rerender="changeTLPopup"/>
                                        <apex:commandButton value="Cancel"  styleClass="closeButton" action="{!closeChangeTLPopup}" rerender="changeTLPopup"/>
                                    </apex:pageBlock> 
                                </apex:outputPanel>
                                
                            </apex:outputPanel>             
                            <apex:outputPanel id="changeQCPopup"  style="display:none;" styleClass="jobtitle">
                                <apex:outputPanel id="QCInnerOutputPnl"  styleClass="customPopup" layout="block"  rendered="{!displayChangeQCPopUp }">
                                    <apex:pageBlock > 
                                        <apex:pageblockSection > 
                                            <apex:pageblocksectionItem >
                                                <apex:outputText value="Shift" />
                                                <apex:selectList value="{!selShiftForQC}" size="1" multiselect="false">
                                                    <apex:actionSupport event="onchange" action="{!changeShiftForQC}"  rerender="selTeamForQCId" />
                                                    <apex:selectOptions value="{!shiftNamesForQC}" />
                                                </apex:selectList>
                                                
                                            </apex:pageblocksectionItem> 
                                            <apex:pageblocksectionItem >
                                                <apex:outputPanel id="selTeamForQCId" >
                                                    <apex:outputText value="Avaiable Team" />
                                                    <apex:selectList value="{!selTeamForQC}" size="1" multiselect="false">
                                                        <apex:actionSupport event="onchange" action="{!changeTeamForQC}" rerender="selQcForQCId" />
                                                        <apex:selectOptions value="{!teamNamesForQC}" />
                                                    </apex:selectList>
                                                </apex:outputPanel>
                                            </apex:pageblocksectionItem>
                                            <apex:pageblocksectionItem >
                                                <apex:outputPanel id="selQcForQCId" >
                                                    <apex:outputText value="Select QC Name" />
                                                    <apex:selectList value="{!selQcForQC}" size="1" multiselect="false">
                                                        <apex:selectOptions value="{!qcNamesForQC}" />
                                                    </apex:selectList>
                                                </apex:outputPanel>
                                            </apex:pageblocksectionItem>                                       
                                        </apex:pageblockSection>
                                        
                                        <apex:commandButton value="Submit" action="{!saveQcChanges}" styleClass="closeButton" rerender="changeQCPopup"/>
                                        <apex:commandButton value="Cancel"  styleClass="closeButton" action="{!closeChangeQCPopup}" rerender="changeQCPopup"/>
                                    </apex:pageBlock>  
                                </apex:outputPanel>
                            </apex:outputPanel>
                            
                            <div class="blanket-div" style="display:none;"></div>
                            
                            <apex:outputPanel id="VDjobPopup" style="display:none;" styleClass="jobtitle">
                                
                                <apex:outputPanel id="VDjobPopInnerOutputPnl"  styleClass="customPopup" layout="block"  rendered="{!displayVDJobPopUp}">
                                    <apex:pageBlock > 
                                        <apex:pageblockSection >  
                                            <apex:outputLabel styleClass="jobtitleHd" value="Change Job Titles"></apex:outputLabel>
                                            <UL>   
                                                <apex:outputLabel value="Job Titles"></apex:outputLabel>    
                                                
                                                <apex:selectcheckboxes layout="pageDirection" value="{!VDEPMSJobList}" >                   
                                                    <apex:selectoptions value="{!VDJobList}"  />          
                                                </apex:selectcheckboxes> 
                                            </UL>     
                                        </apex:pageblockSection>
                                        
                                        <apex:commandButton value="Submit" action="{!updateVDJobPopup}" styleClass="closeButton" rerender="VDjobPopup" oncomplete="Reloadpage('SuccessFully Created Jobs');"/>
                                        <apex:commandButton value="Cancel"  action="{!closeVDJobPopup}" styleClass="closeButton" rerender="VDjobPopup" oncomplete="closeBg();"/>   
                                    </apex:pageBlock> 
                                </apex:outputPanel>
                                
                            </apex:outputPanel>
                            <apex:outputPanel id="VDFolPop"  styleClass="jobtitlefolder">
                                <apex:outputPanel id="VDFolpopInnerOutputPnl"  styleClass="customPopup" layout="block"  rendered="{!displayVDFolPopUp}">                                   
                                    <apex:pageBlock > 
                                        <apex:pageblockSection columns="1">                        
                                            <apex:outputLabel styleClass="jobtitleHd" value="Change Folder Instruction"></apex:outputLabel>
                                            <UL>
                                                <apex:pageblockSectionItem >
                                                    <apex:outputLabel value="Folder Instruction"></apex:outputLabel>
                                                    <apex:inputTextArea id="instro" value="{!VDFolInstrucEntered}" rows="25" html-maxlength="1024"  style="width: 99%;"/>                            
                                                </apex:pageblockSectionItem>
                                                <apex:inputHidden value="{!FileListInsruction}" id="hiddenField"/>
                                            </UL>
                                        </apex:pageblockSection>
                                        <apex:commandButton value="Submit" action="{!redirectVDFolPopup}" styleClass="closeButton" oncomplete="SuccessFullyDelete('SuccessFully Instruction updated') ;"/>
                                        <apex:commandButton value="Cancel"  action="{!cancelVDFolPop}" onclick="closeInstructionPopup();"  styleClass="closeButton"  rerender="VDFolPop"/>                                      
                                    </apex:pageBlock>  
                                </apex:outputPanel>                               
                            </apex:outputPanel>                            
                            <apex:outputPanel id="VDFolPopInst"  styleClass="jobtitlefolder">
                                <apex:outputPanel id="popInnerOutputPnlVDInst" styleClass="customPopup" layout="block"  rendered="{!displayVdPopup}">
                                    <apex:pageBlock > 
                                        
                                        <apex:pageblockSection columns="1">                        
                                            <apex:outputLabel styleClass="jobtitleHd" value="Change Instruction"></apex:outputLabel>
                                            <UL>
                                                <apex:pageblockSectionItem >                         
                                                    <apex:outputLabel value="Instruction"></apex:outputLabel>
                                                    <apex:inputTextArea id="address"   value="{!instructionEntered}" rows="25" html-maxlength="1024"  style="width: 99%;"/>
                                                </apex:pageblockSectionItem>
                                            </UL>
                                            
                                        </apex:pageblockSection>
                                        <!-- <apex:inputCheckbox id="RemoveDirIns" value="{!removeDirectory}" /> Remove Directory Instruction--> 
                                        <apex:pageblockbuttons location="bottom">
                                            <apex:commandButton value="Submit" action="{!redirectVDPopup}" styleClass="closeButton" rerender="popup" oncomplete="ReloadVDPage('Successfully added Instruction  for selected Files');"/>
                                            <apex:commandButton value="Cancel"  styleClass="closeButton" action="{!Cancel}" rerender="popup" oncomplete="closeBg();"/>   
                                        </apex:pageblockbuttons>
                                        
                                    </apex:pageBlock> 
                                </apex:outputPanel>
                                
                            </apex:outputPanel>
                            
                            <apex:pageBlock rendered="{!viewDirectory}" id="viewdirectory"> 
                                <apex:pageMessages id="errorMessages"/>
                                <!-- <apex:commandButton value="Open Files" onclick="openFilesJS('{!$Component.openFiles}'); return false;" /> -->
                                <apex:commandButton value="Change Job Title"    onclick="JobFilesJS('{!$Component.openFiles}'); return false;" />      
                                <!--<apex:commandButton value="Change Folder Instructions"   onclick="JobinstrcutionJS('{!$Component.openInstrFiles}'); return false;"/>      -->
                                <apex:commandButton value="Change File Instruction" onclick="vdChnageInstruction('{!$Component.openInstrFiles}'); return false;"/> 
                                
                                <apex:commandButton value="Change TL Incharge"  onclick="TLFilesJS('{!$Component.openFiles}'); return false;"  oncomplete="showpopup5('{!$Component.changeTLPopup}');"/> 
                                <apex:commandButton value="Change QC Incharge"  onclick="QCFilesJS('{!$Component.openFiles}'); return false;"  oncomplete="showpopup5('{!$Component.changeQCPopup}');"/> 
                                
                                <apex:commandButton value="Convert to Order file"  onclick="OrderInstDelete('ConvertToOrder'); return false;"  oncomplete="showpopup5('{!$Component.changeQCPopup}');"/> 
                                
                                <apex:commandButton value="Mark as Order Attachments"  onclick="OrderInstDelete('ConvertToInstruction'); return false;"  oncomplete="showpopup5('{!$Component.changeQCPopup}');"/>
                                
                                <apex:commandButton value="Mark as File Attachments"  Onclick="Vfpage(); return false;" />        
                                
                                <apex:commandButton value="Delete Folder/Files"  onclick="OrderInstDelete('Delete'); return false;"  oncomplete="showpopup5('{!$Component.changeQCPopup}');"/> 
                                
                                <apex:commandButton value="Change PO status to New" onclick="validatepopup(); return false;" reRender="viewdirectory"/>
                                <apex:actionfunction name="statusproceed" action="{!savePOStatus}" reRender="viewdirectory"/>                   
                                
                                <apex:commandbutton id="refreshlist" value=" "  rerender="viewdir" onclick="return DisplayList();setWinSize();" title="Refresh" styleclass="refreshListButton"/> 
                                
                                
                                
                                
                                <apex:actionFunction name="CallApexMethod" action="{!openDirectory}" onComplete="SuccessFully('SuccessFully updated Selected Records') ;">
                                    <apex:param id="openFiles" name="openFiles" value=""/>
                                </apex:actionFunction>
                                
                                <apex:actionFunction name="CallApexJob" action="{!showVDjobPopup}" oncomplete="showpopup6('{!$Component.VDjobPopup}');" rerender="VDjobPopup, errorMessages">
                                    <apex:param id="openJobFiles" name="openJobFiles" value=""/>
                                </apex:actionFunction>
                                
                                <apex:actionFunction name="CallApexJobInstruction" action="{!showVDFolPopup}"   rerender="VDFolPop, errorMessages" oncomplete="showpopup3('{!$Component.VDFolPop}');">
                                    <apex:param id="openInstrFiles" name="openInstrFiles" value=""/>
                                </apex:actionFunction>
                                
                                <apex:actionFunction name="CallApexshowPopupVD" action="{!showPopupVDFiles}"   rerender="VDFolPopInst, errorMessages" oncomplete="showpopup3('{!$Component.VDFolPopInst}');">
                                    <apex:param id="openVDFile" name="openInstrFiles" value=""/>
                                </apex:actionFunction>
                                
                                
                                <apex:actionFunction name="CallApexMethodconvertToOrder" action="{!ConvertToorder}" onComplete="SuccessFullyDelete('SuccessFully updated Selected Records') ;">
                                    <apex:param id="convertToOrder" name="convertToOrder" value=""/>
                                </apex:actionFunction>
                                
                                <apex:actionFunction name="convertToInstructMember" action="{!convertToInstructMember}" onComplete="SuccessFullyDelete('{!updateStatus}');" rerender="testRefreshId"> 
                                </apex:actionFunction>
                                
                                <apex:actionFunction name="convertToInstrFile" action="{!convertToInstrFile}" onComplete="showInstPopUp('{!isMemberExist}') ;" rerender="testRefreshId"> 
                                    <apex:param id="convertToInstrMem" name="convertToInstrMem" value=""/>
                                </apex:actionFunction>
                                
                                <apex:actionFunction name="deleteFiles" action="{!deleteFiles}" immediate="true" onComplete="SuccessFullyDelete('Selected Files are deleted SuccessFully') ;">
                                    <apex:param id="deleteFilesID" name="deleteFilesID" value=""/>
                                </apex:actionFunction>
                                
                                <apex:outputPanel id="viewdirectory">
                                    
                                    
                                </apex:outputPanel>
                                
                                <div class="treeheader" style="height:10px;margin-bottom:5px;" id="viewdir">&nbsp;</div> 
                                
                                
                                &nbsp;<h3> TAT : <apex:outputText >{!datavalues} </apex:outputText></h3>
                                <div class="legend-content">
                                    <ul>
                                        <li class="parentColor"><em></em>Parent Files</li>
                                        <li class="copyColor"><em></em>Copy Files</li>                                
                                        <li class="splitedColor"><em></em>Splitted Files</li>
                                        
                                    </ul>
                                </div>
                                <div class="treeheader" style="height:10px;margin-bottom:5px;">&nbsp;</div>
                                
                                <ul id="browser1" class="filetree treeview-famfamfam">
                                    <li>
                                        <span class="folder">
                                            <input type="checkbox" />
                                            <span style="font-weight:bold;"> <apex:outputLabel value="{!parentid}"/> </span>
                                        </span>
                                        <ul id="treesctruc">
                                        </ul>
                                    </li>  
                                </ul>               
                                
                                <div id="regionTree">
                                </div>
                                
                                <script type="text/javascript">
                                
                                
                                function convert(array){
                                    var map = {};
                                    for(var i = 0; i < array.length; i++){
                                        var obj = array[i];
                                        obj.children= [];                
                                        map[obj.FileIDId] = obj;                
                                        
                                        var parent = obj.parentId ||  obj.splittedParentId || '-';          
                                        if(!map[parent]){
                                            map[parent] = {
                                                children: []
                                            };
                                        }
                                        map[parent].children.push(obj);
                                    }
                                    
                                    return map['-'].children;
                                    
                                }
                                var replacedString='{!AllDetails}';
                                var splitedarray= JSON.parse(replacedString);
                                var r = convert(splitedarray);      
                                
                                var treeString = '';
                                function cnvertTotree(json){
                                    var classDirname=''; 
                                    var classchidDir=''; 
                                    $(json).each(function(key, value) {                
                                        if(value.fileType=='Directory'){
                                            treeString+='<li>';
                                            classDirname='folder';
                                            classchidDir='folder';
                                        }else if(value.fileType=='Image'){
                                            classDirname='fileTypes';
                                            classchidDir='child';
                                            treeString+="<li class='child'>";
                                        }else{
                                            classDirname='file';
                                            classchidDir='child';
                                            treeString+="<li class='child'>";                
                                        }
                                        
                                        
                                        if(value.splittedParentId && value.parentId == null)
                                        {
                                            treeString+='<span class='+classDirname+'><span class="splitedfiles"><input type="checkbox" onclick="checkButtonHide(this.value,this.className);" class="'+classchidDir+' '+classDirname+'" value='+value.FileIDId+'-'+value.FileStatus+'>'+value.File_AutoNumber+' - '+' ( ' + value.FileStatus+' ) '+'</span></span>';
                                        }else{
                                            treeString+='<span  class='+classDirname+'><input type="checkbox" onclick="checkButtonHide(this.value,this.className);" class="'+classchidDir+' '+classDirname+'" value='+value.FileIDId+'-'+value.FileStatus+'>'+value.File_AutoNumber+' - '+' ( ' + value.FileStatus+' ) '+'</span>';
                                        }
                                        
                                        
                                        
                                        if(value.children != undefined && value.children.length > 0){
                                            treeString+="<ul>";
                                            cnvertTotree(value.children);
                                            treeString+="</ul>";
                                        }
                                        
                                        if(value.fileType=='Directory'){
                                            treeString+='</li>';    
                                        }else if(value.fileType=='Image'){
                                            treeString+="</li>";
                                        }else{
                                            treeString+="</li>";
                                        }
                                        
                                        
                                    });
                                }
                                
                                $(function(){
                                    
                                    var json = r;
                                    cnvertTotree(json);
                                    $('#treesctruc').append(treeString);
                                    $('#browser1').checktree();   
                                    $('#browser1').treeview()
                                });
                                
                                </script>
                                
                                
                                
                                
                                
                            </apex:pageBlock> 
                            <apex:actionFunction name="showRedoList" action="{!refreshRedoRecords}"/> 
                            <apex:pageBlock rendered="{!classification}" id="classification">
                                
                                
                                <h1>   <apex:outputPanel id="selRedoId" >
                                    <apex:outputText value="Production Order Name  :" />  &nbsp;&nbsp;
                                    <apex:selectList value="{!POrecord}" size="1" multiselect="false" onchange="showRedoList()">
                                        <apex:selectOptions value="{!PORedoList}" />
                                    </apex:selectList>
                                    </apex:outputPanel>  </h1>  <br/> <br/>
                                
                                
                                
                                <h1>         Total File Count(Anken) : &nbsp;&nbsp;&nbsp; {!POquery.Total_Anken_Count__c}  </h1>  &nbsp; &nbsp;&nbsp;<h3> TAT : <apex:outputText >{!datavalues} </apex:outputText> </h3> <br/> <br/>
                                
                                
                                
                                <div class="orderClassificationSec">    
                                    <table width="50%" cellpadding="0" cellspacing="0" border="0" class="tableTopSec">
                                        
                                        <tr>
                                            <td colspan="2" align="center" ><apex:commandButton value="Export in Excel" action="{!ExportToExcel}" rerender="AC"/></td>
                                            
                                            
                                        </tr>  
                                        
                                        <tr>
                                            <td colspan="2"><h3>Order Classification Details</h3></td>
                                        </tr>
                                        <!-- <tr>           
<td class="font14">Production Order Name : <b>{!POquery.Name}</b></td>
<td class="font14">TAT : <b>{!datavalues} </b></td>
</tr>

<tr>
<td class="font14">Select File Category</td>
<td class="font14">
<apex:selectList value="{!selectedCategory}" size="1" id="elementshift" >
<apex:selectoptions value="{!AllTypeCategory}" />
<apex:actionSupport event="onchange" action="{!filterByStatus}" reRender="classificationDiv2" />
<!-- classificationDiv --> 
                                        <!-- </apex:selectList> 
</td>
</tr>  -->          
                                        
                                        
                                    </table> 
                                    <apex:outputPanel id="classificationDiv2">   
                                        <div class="container_12 divider">
                                            <table align="left" class="fancyTable" cellpadding="0" cellspacing="0" width="50%">
                                                <thead>
                                                    <tr>
                                                        <th>Classification</th>
                                                        <th class="last">Number of Files</th>
                                                    </tr>
                                                </thead>
                                                <tfoot>
                                                    <tr>
                                                        <td>Total Files</td>
                                                        <td class="last">{!SumOfTotal}</td>
                                                        
                                                    </tr>
                                                </tfoot>
                                                
                                                <tbody>
                                                    
                                                    <apex:repeat value="{!FilesClassification}" var="FileObj"> 
                                                        <tr>
                                                            
                                                            
                                                            <td>{!FileObj.ClassificationName}</td>
                                                            
                                                            <td class="numeric"><apex:outputLink value="#" onclick="callClassifcation('/apex/EPMS_View_Classifications?ids={!POquery.Name},{!FileObj.ClassificationName}&status={!selectedCategory}');" >{!FileObj.TotalFilesCount}</apex:outputLink> </td> 
                                                            
                                                            
                                                        </tr>
                                                    </apex:repeat> 
                                                    
                                                </tbody>
                                            </table>
                                            
                                        </div>
                                    </apex:outputPanel>
                                </div> 
                                
                                <apex:outputPanel >   
                                    <table width="100%" cellpadding="0" cellspacing="0" border="0" class="tableTopSec">
                                        <tr>
                                            <td colspan="2" style="padding-top:20px;"><h3>Optional Job Details</h3></td>
                                        </tr>
                                    </table>
                                    
                                    <table align="left" class="fancyTable leftRight_text" cellpadding="0" cellspacing="0" width="50%">
                                        <thead>
                                            <tr>
                                                <th>Optional Job Name</th>
                                                <th class="last">Number of Files</th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody>
                                            <apex:repeat value="{!mapInteger}" var="mapKey">
                                                <tr>
                                                    
                                                    <td>{!mapKey}</td>
                                                    <td>{!mapInteger[mapKey]}</td>
                                                </tr> 
                                            </apex:repeat>                                            
                                        </tbody>
                                    </table>
                                </apex:outputPanel>                             
                            </apex:pageBlock>   
                            
                            
                            <apex:pageBlock rendered="{!orderInformation }" id="orderinfo">
                                <apex:pageMessages ></apex:pageMessages>
                                <h3> Production Order : {!poObjDisplay.Name}  </h3>
                                
                                &nbsp;<h3> TAT : <apex:outputText >{!datavalues} </apex:outputText></h3>
                                <div class="orderInfoTableSec">
                                    
                                    <table width="50%" border="0" cellpadding="0" cellspacing="0">
                                        <apex:repeat value="{!poObjDisplay}" var="orderObj">
                                            <b><apex:outputLabel value="Order Information"> </apex:outputLabel></b>
                                            <br></br>
                                        <tr>
                                            <th><apex:outputLabel value="Production Order Number"> </apex:outputLabel></th>
                                            <td><apex:outputText >{!parentId}</apex:outputText> </td>
                                        </tr>
                                        
                                        <tr>
                                            <th><apex:outputLabel value="Job Name"> </apex:outputLabel></th>>
                                            <td><apex:outputText >{!poObjDisplay.Job_List__c}</apex:outputText> </td>
                                        </tr>
                                        
                                        <tr>
                                            <th><apex:outputLabel value="Total Files"> </apex:outputLabel></th>>
                                            <td><apex:outputText >{!poObjDisplay.Total_File_Count__c}</apex:outputText> </td>
                                        </tr>
                                        
                                        <tr>
                                            <th><apex:outputLabel value="TL Incharge"> </apex:outputLabel></th>>
                                            <td><apex:outputText >{!poObjDisplay.TL_Incharge__r.Name}</apex:outputText> </td>
                                        </tr>                        
                                        
                                        <tr>
                                            <th><apex:outputLabel value="QC Incharge"> </apex:outputLabel></th>>
                                            <td><apex:outputText >{!poObjDisplay.QC_Incharge__r.Name}</apex:outputText> </td>
                                        </tr>
                                        
                                        <tr>
                                            <th><apex:outputLabel value="Order TAT"> </apex:outputLabel></th>>
                                            <td><apex:outputfield value="{!poObjDisplay.Production_Order_TAT__c}"/> </td>
                                        </tr>                       
                                        
                                        <tr>
                                            <th><apex:outputLabel value="Order Status"> </apex:outputLabel></th>
                                            <td><apex:outputField value="{!poObjDisplay.Production_Order_Status__c}"/>                                                
                                            </td>
                                        </tr>                                        
                                        <tr>
                                            <th><apex:outputLabel value="Order Instruction"> </apex:outputLabel></th>>
                                            <td style="align:left;"><apex:outputfield value="{!poObjDisplay.Production_Order_Instruction__c}"/> </td>
                                        </tr>                                       
                                        
                                    </apex:repeat>  
                                </table> 
                            </div>
                        </apex:pageBlock> 
                    <apex:outputPanel id="popup" styleClass="jobtitlefolder">
                        <apex:outputPanel id="popInnerOutputPnl" styleClass="customPopup" layout="block"  rendered="{!displayPopUp}">
                            <apex:pageBlock >                                 
                                <apex:pageblockSection columns="1">                        
                                    <apex:outputLabel styleClass="jobtitleHd" value="Change Instruction"></apex:outputLabel>
                                    <UL>
                                        <apex:pageblockSectionItem >                         
                                            <apex:outputLabel value="Instruction"></apex:outputLabel>
                                            <apex:inputTextArea id="address"   value="{!instructionEntered}" rows="25" html-maxlength="1024"  style="width: 99%;"/>
                                        </apex:pageblockSectionItem>
                                    </UL>                                    
                                </apex:pageblockSection>
                                <!--<apex:inputCheckbox id="RemoveDirIns" value="{!removeDirectory}"/> <apex:outputLabel value="Remove Directory Instruction" for="RemoveDirIns"/>-->
                                <apex:pageblockbuttons location="bottom">
                                    <apex:commandButton value="Submit" action="{!redirectPopup}" styleClass="closeButton" rerender="popup" oncomplete="Reloadpage('Successfully added Instruction  for selected Files');"/>
                                    <apex:commandButton value="Cancel"  styleClass="closeButton" action="{!Cancel}" rerender="popup" oncomplete="closeBg();"/>   
                                </apex:pageblockbuttons>
                            </apex:pageBlock> 
                        </apex:outputPanel>
                    </apex:outputPanel>
                    <apex:outputPanel id="callJS">
                        
                        <script type="text/javascript">
                        var Jobdetails='{!displayJobPopUp}';
                        var FileInstruction = '{!displayPopup}';
                        if('{!displayJobPopUp}'=='true'){
                            if(document.getElementById('{!$Component.jobPopup}')){
                                $(".blanket-div").show();   
                                document.getElementById('{!$Component.jobPopup}').style.display='block';
                            }
                        }else{
                            if(document.getElementById('{!$Component.jobPopup}')){
                                document.getElementById('{!$Component.jobPopup}').style.display='none';
                            }
                        }
                        
                        if('{!displayPopup}'=='true'){
                            if(document.getElementById('{!$Component.popup}')){
                                $(".blanket-div").show();   
                                document.getElementById('{!$Component.popup}').style.display='block';
                            }
                        }else{
                            if(document.getElementById('{!$Component.popup}')){
                                document.getElementById('{!$Component.popup}').style.display='none';
                            }
                        }
                        
                        </script>
                    </apex:outputPanel>
                    <apex:outputPanel id="jobPopup" style="display:none;" styleClass="jobtitle" >
                        
                        <apex:outputPanel id="jobPopInnerOutputPnl"  styleClass="customPopup" layout="block" rendered="{!displayJobPopUp}">
                            <apex:pageBlock > 
                                <apex:pageblockSection >  
                                    <apex:outputLabel styleClass="jobtitleHd" value="Change Job Titles"></apex:outputLabel>
                                    <UL>   
                                        <apex:outputLabel value="Job Titles"></apex:outputLabel>                           
                                        
                                        <apex:selectcheckboxes layout="pageDirection" value="{!EPMSJobList}">                   
                                            <apex:selectoptions value="{!JobList}" />          
                                        </apex:selectcheckboxes> 
                                    </UL>     
                                </apex:pageblockSection>
                                
                                <apex:commandButton value="Submit" action="{!updateObject}" styleClass="closeButton" rerender="jobPopup" oncomplete="Reloadpage('SuccessFully Created Jobs');"/>
                                <apex:commandButton value="Cancel"  styleClass="closeButton" action="{!closeJobTitlePopup}" rerender="jobPopup" oncomplete="closeBg();"/>   
                            </apex:pageBlock>  
                        </apex:outputPanel>                        
                    </apex:outputPanel>                   
                    
                    <apex:pageBlock rendered="{!orderFiles}" id="pageOrderFiles">
                        <div style="width:810px;"><apex:pageMessages id="errorMessages" /></div> 
                        <div style="margin-bottom:10px;">
                            
                            
                            <apex:commandButton value="Open Files in Photo Shop" action="{!savePSCS6}" status="myDisplayStatus" rerender="myDisplayStatus, errorMessages" oncomplete="if('{!errorFlag}' == 'false') {Reloadpage('Selected Files Are Marked to Open in Photoshop');};"/> 
                            <apex:commandButton value="Change Job Title"   action="{!showJobTitlePopUp}" rerender="jobPopup,callJS,errorMessages"  oncomplete="showpopup1('{!$Component.jobPopup}');"/>
                            <apex:commandButton value="Change File Instruction" action="{!showPopup}" rerender="popup,callJS, errorMessages" oncomplete="showpopup2('{!$Component.popup}');"/> 
                            <apex:commandButton value="Edit File Details" action="{!editFile}" rerender="errorMessages" />
                            
                            <apex:commandButton value="Change PO status to New" onclick="validatepopup(); return false;" reRender="pageOrderFiles"/>
                            <apex:actionfunction name="statusproceed" action="{!savePOStatus}" reRender="pageOrderFiles"/>                   
                            
                            <!--  <apex:commandButton value="Clear File Queue" action="{!clearQueue}" status="myDisplayStatus" rerender="errorMessages, myDisplayStatus" oncomplete="Reloadpage('Selected Files Cleared From Queue');"/> -->
                            <apex:commandbutton id="refreshlist" value=" " rerender="gridpanel" onclick="return DisplayList();setWinSize();" title="Refresh" styleclass="refreshListButton"/>   
                            
                            
                            <apex:actionFunction action="{!refresh}" name="status" reRender="gridpanel" />
                            
                            <ul class="switchView">                 
                                <li Class="{!IF(showGrid,'','active')}">
                                    <a href="javascript:;" onclick="return DisplayList();" class="productlistView"></a>
                                </li>
                                <li Class="{!IF(showGrid,'active','')}">
                                    <a href="javascript:;" onclick="return DisplayGrid();" class="productGridView"></a>
                                </li>
                            </ul>
                            
                        </div>
                        <div style="width:100%;font-weight:bold;">
                            <apex:actionFunction name="showRedoListForOrderFiles" action="{!refreshRedoRecordsForOrderFiles}"/> 
                            
                            <apex:outputPanel id="selRedoIds" >
                                <apex:outputText value="Production Order Name  :" />  &nbsp;&nbsp;
                                <apex:selectList value="{!POrecord}" size="1" multiselect="false" onchange="showRedoListForOrderFiles()">
                                    <apex:selectOptions value="{!PORedoList}" />
                                </apex:selectList>
                            </apex:outputPanel>
                            
                            
                            
                            
                            &nbsp; TAT : <apex:outputText >{!datavalues} </apex:outputText></div> 
                        
                        <apex:actionStatus id="myDisplayStatus"  startText="Processing..."  stopText=""/>     
                        
                        <div class="tblPartOrderFile penalityTableSec">
                            <apex:outputPanel id="outputPanelId1" rendered="{!wrapperList.size==0}">
                                <div>No Records Found</div>           
                            </apex:outputPanel> 
                            
                            <!-- -->
                            <apex:outputPanel rendered="{!NOT(showGrid)}" id="showListID">
                                
                                
                                <apex:outputPanel > 
                                    <table class="topPagination" width="100%" border="0" cellpadding="0" cellspacing="0">
                                        <tr>  
                                            <td width="33%" align="left" class="lefttd"></td>     
                                            <apex:outputPanel rendered="{!IF(wrapperList.size > 0,true,false)}" >
                                                <td align="center" width="34%">
                                                    <apex:commandButton value="Previous" action="{!Previous}"  status="status" disabled="{!DisablePrevious}" />
                                                    <apex:commandButton value="Next" action="{!Next}" status="status" disabled="{!DisableNext}" />
                                                </td>
                                                
                                                
                                                
                                                
                                            </apex:outputPanel>
                                            <td width="33%"></td>
                                        </tr>
                                    </table>  
                                    
                                    
                                    <table style="width:100%;" class="noborder_customtable">
                                        <tr>
                                            <td style="width:65%;">
                                                <div style="border:1px solid #353535;  padding-left:5px;">
                                                    <table class="topPagination padding_top_btm top_custom_table_tdmiddle" width="100%" border="0" cellpadding="0" cellspacing="0">
                                                        <tr>    
                                                            
                                                            <td width="23%" align="left">
                                                                <b> Status:&nbsp;&nbsp;</b> <apex:selectList value="{!sortChoice}" id="sortPicklist"  multiselect="false" size="1">
                                                                <apex:selectOptions value="{!sortingoptions}" />
                                                                </apex:selectList>
                                                            </td>
                                                            <td width="12%" align="left">
                                                                <b>Category:&nbsp;&nbsp;</b> <apex:selectList styleClass="sortListAsc" value="{!sortCatg}"  multiselect="false" size="1">
                                                                <apex:selectOptions value="{!sortingCatgoptions}"/>
                                                                </apex:selectList>
                                                            </td>
                                                            <td width="35%" align="left">
                                                                <b>Job Title:&nbsp;&nbsp;</b> <apex:selectList styleClass="sortListAsc" value="{!sortTitle}"  multiselect="false" size="1">
                                                                <apex:selectOptions value="{!sortingTitleoptions}"/>
                                                                </apex:selectList>
                                                            </td>
                                                            
                                                            <td width="5%" align="left">
                                                                <apex:commandButton value="Submit" action="{!refresh}"/>
                                                            </td>
                                                            
                                                        </tr>
                                                    </table>
                                                </div> 
                                            </td>
                                            <td style="width:5%;"></td>
                                            <td style="width:30%;">
                                                <div style="border:1px solid #353535;  padding-left:5px;">
                                                    <table class="topPagination padding_top_btm top_custom_table_tdmiddle" width="100%" border="0" cellpadding="0" cellspacing="0">
                                                        <tr>  
                                                            <td width="21%" align="left" class="sortBy">
                                                                <b> Sort by: </b>
                                                                <apex:selectList value="{!sortingChoice}" styleClass="ml10" id="sortBasedOn"  multiselect="false" size="1">
                                                                    <apex:selectOptions value="{!sortingBasedOn}"/>
                                                                </apex:selectList>
                                                                
                                                                <apex:selectList styleClass="sortListAsc ml10" value="{!sortType}"  multiselect="false" size="1"  onchange="showSort()" >
                                                                    <apex:selectOptions value="{!sortingTypeoptions}"/>
                                                                </apex:selectList>
                                                            </td>
                                                            
                                                            <td width="5%" align="left" style="text-align:left;">
                                                                <apex:commandButton value="Submit" action="{!refresh}"/>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </td>
                                            
                                        </tr>
                                    </table>
                                    <apex:outputPanel rendered="{!IF(wrapperList.size > 0,true,false)}" >                 
                                        <div class="container_12 divider freezeTableAutoWidth">
                                            <div class="grid_6">
                                                <table class="fancyTable headerFreezeTable" cellpadding="0" cellspacing="0">
                                                    <thead>
                                                        <tr>
                                                            <!-- <th><input type="checkbox" id = "selectall" onclick="return checkCheckboxes(this);"/></th> -->
                                                            <th><input type="checkbox" id="checkall" /></th>
                                                            <th>File Name</th>
                                                            <th>File Type</th>  
                                                            <th>Status</th>
                                                            <th>Job Name</th>
                                                            <th>Job Type</th>
                                                            <th>Member Shift</th>
                                                            <th>Operator Incharge</th>
                                                            <th id="thumbImageHeader">Thumbnail Display</th>
                                                            <th style="min-width:220px">File Instructions</th> <!-- style="min-width:340px" -->
                                                            <th style="min-width:230px">Order Instruction</th> <!--  -->
                                                            <!-- <th style="min-width:220px">File Instructions</th> 
<th style="min-width:230px">Order Instruction</th> -->
                                                            <!--  <th>Directory Instruction</th> -->
                                                            <th>Handover Instruction</th>
                                                            <th>QC Comments</th>
                                                            <th>Category</th>
                                                            <th>Work Start Time</th>
                                                            <th>Work End Time</th>
                                                            <th>Total Work Time</th>
                                                            <th>Artist Work Time</th>
                                                            <th>Total Break Time</th> 
                                                            <th class="last">Breaks</th> 
                                                        </tr>
                                                    </thead>    
                                                    <apex:variable var="inc" value="{!0}"/>
                                                    <apex:repeat value="{!wrapperList}" var="fileObj">
                                                        <apex:variable var="inc" value="{!inc+1}"/>
                                                        <tbody>   
                                                            <tr>
                                                                <td><apex:inputCheckbox styleClass="childs" value="{!fileObj.isSelected}" /></td>
                                                                <td><apex:outputlink value="/{!fileObj.fileWrap.Id}" target="_blank" >{!fileObj.fileWrap.Name}</apex:outputlink> </td>  
                                                                <td><apex:outputText >{!fileObj.fileWrap.File_Type__c}</apex:outputText> </td>
                                                                <td><apex:outputText >{!fileObj.fileWrap.Status__c}</apex:outputText> </td>
                                                                
                                                                <td>
                                                                    <div id="jobID{!inc}">
                                                                    </div>
                                                                    <script type="text/javascript">
                                                                    var jobtitles='{!fileObj.jobTitles}';
                                                                    var jobsplioted='';
                                                                    jobtitles=jobtitles.split(',');                                        
                                                                    for(var incr=0;incr < jobtitles.length;incr++){                                            
                                                                        jobsplioted+=jobtitles[incr]+'<br/>';                                            
                                                                    }
                                                                    $('#jobID{!inc}').html(jobsplioted);
                                                                    
                                                                    </script>
                                                                </td>
                                                                <td><apex:outputText >{!fileObj.fileWrap.Job_Type__c}</apex:outputText> </td>
                                                                <td><apex:outputText >{!fileObj.fileWrap.Member_Shift__c}</apex:outputText> </td>
                                                                <td><apex:outputlink value="/{!fileObj.memWrap.Id}" target="_blank">{!fileObj.memWrap.Name}</apex:outputlink> </td>
                                                                
                                                                <td class="thumbImageBody"><apex:outputText value="{!fileObj.fileWrap.Thumbnail_Display__c}" escape="false"/></td>                             
                                                                <td style="text-align:left"><apex:outputfield value="{!fileObj.fileWrap.Instruction__c}" /> </td>
                                                                <td style="text-align:left"><apex:outputfield value="{!fileObj.fileWrap.Order_Instructions__c}"></apex:outputfield> </td> 
                                                                <td style="text-align:left"><apex:outputfield value="{!fileObj.fileWrap.File_HandOver_Instructions__c}"/> </td>                 
                                                                <td><apex:outputText >{!fileObj.fileWrap.QC_Comments__c}</apex:outputText> </td>  
                                                                <td><apex:outputText >{!fileObj.catWrap.Name}</apex:outputText> </td>     
                                                                <td><apex:outputText value=" {!fileObj.fileWrap.Work_Start_Time__c}"/ > </td>   
                                                                    <td><apex:outputText value=" {!fileObj.fileWrap.Work_End_Time__c}"/ > </td>                 
                                                                        <td><apex:outputText >{!fileObj.fileWrap.Total_WorkTime_for_File__c}</apex:outputText> </td> 
                                                                <td><apex:outputText >{!fileObj.fileWrap.Individual_time__c}</apex:outputText> </td> 
                                                                <td><apex:outputText >{!fileObj.fileWrap.Total_Break_Time_File__c}</apex:outputText></td> 
                                                                <td class="last"><apex:outputText >{!fileObj.fileWrap.No_of_Breaks__c}</apex:outputText> </td> 
                                                                
                                                            </tr>
                                                        </tbody>    
                                                    </apex:repeat>
                                                    
                                                </table>
                                            </div>
                                            <div class="clear"></div>
                                        </div>
                                    </apex:outputpanel>        
                                    
                                    <div class="paginationNav">
                                        
                                        
                                        
                                        <apex:outputPanel rendered="{!IF(wrapperList.size > 0,true,false)}" >   
                                            
                                            <table class="pagefooter" width="100%" border="0" cellpadding="0" cellspacing="0" >
                                                
                                                <tr>
                                                    <apex:actionFunction name="showNext" action="{!refresh}" />
                                                    <td width="20%" align="left" class="lefttd">Display&nbsp;<apex:selectList value="{!setUserChoice}"  multiselect="false" size="1" onchange="showNext();setWinSize();">
                                                        <apex:selectOptions value="{!items}"/>
                                                        </apex:selectList>&nbsp; records per page &nbsp;
                                                        <td width="13%" id="count" class="ss"  >  <apex:outputText id="myPlaceholder" value="0"/>&nbsp;&nbsp; Records Selected </td>
                                                    
                                                </td>
                                            <td width="34%"><apex:commandButton value="Previous" action="{!Previous}"  status="status" disabled="{!DisablePrevious}" onclick="setWinSize();"/>
                                                <apex:commandButton value="Next" action="{!Next}" status="status" disabled="{!DisableNext}" onclick="setWinSize();"/></td>
                                            
                                            <apex:actionStatus id="status1" startText="Please Wait..."/>
                                            <apex:actionFunction name="show2" action="{!refreshPageRecords}" /> <!--  -->
                                            <td width="33%" align="right" class="NOFPage"> Page &nbsp; <apex:inputText value="{!newFileForPageCount}" id="pageCount" onchange="setWinSize(); show2();" onkeydown="if(event.keyCode==13){this.blur();show2();setWinSize();}"/> &nbsp;  Of &nbsp;  <apex:outputText label="Total" value="{!noOfPages}" escape="false"/></td>
                                        </tr>
                                    </table>
                                    
                                </apex:outputPanel>
                                
                            </div>
                        </apex:outputPanel> 
                    </apex:outputPanel>
                    
                    <apex:outputPanel rendered="{!showGrid }" id="showGridID">
                        <apex:actionFunction name="showSort" action="{!refresh}" />
                        <apex:outputPanel > 
                            
                            <table class="topPagination" align="center" width="100%" border="0" cellpadding="0" cellspacing="0">
                                <tr>  
                                    <!--<td width="33%" align="left" class="lefttd">
</td>-->   
                                    <apex:outputPanel rendered="{!IF(wrapperList.size > 0,true,false)}" >
                                        
                                        <td align="center"><apex:commandButton value="Previous" action="{!Previous}"  status="status" disabled="{!DisablePrevious}" />
                                            <apex:commandButton value="Next" action="{!Next}" status="status" disabled="{!DisableNext}" /></td>
                                    </apex:outputPanel>
                                </tr>
                            </table>  
                            
                            
                            
                            <table  style="width:100%;" class="noborder_customtable">
                                <tr>
                                    <td style="width:65%;">
                                        <div style="border:1px solid #353535;  padding-left:5px;">
                                            <table class="topPagination padding_top_btm top_custom_table_tdmiddle" width="100%" border="0" cellpadding="0" cellspacing="0">
                                                <tr>    
                                                    
                                                    <td width="16%" align="left">
                                                        <b>Status:&nbsp;&nbsp;</b> <apex:selectList value="{!sortChoice}" id="sortPicklists"  multiselect="false" size="1">
                                                        <apex:selectOptions value="{!sortingoptions}" />
                                                        </apex:selectList>
                                                    </td>
                                                    <td width="12%" align="left">
                                                        <b>Category:&nbsp;&nbsp;</b> <apex:selectList styleClass="sortListAsc" value="{!sortCatg}"  multiselect="false" size="1">
                                                        <apex:selectOptions value="{!sortingCatgoptions}"/>
                                                        </apex:selectList>
                                                    </td>
                                                    <td width="35%" align="left">
                                                        <b>Job Title:&nbsp;&nbsp;</b> <apex:selectList styleClass="sortListAsc" value="{!sortTitle}"  multiselect="false" size="1">
                                                        <apex:selectOptions value="{!sortingTitleoptions}"/>
                                                        </apex:selectList>
                                                    </td>
                                                    <td width="5%" align="left">
                                                        <apex:commandButton value="Submit" action="{!refresh}"/>
                                                    </td>
                                                    
                                                </tr>
                                            </table>
                                        </div>
                                    </td>
                                    <td style="width:5%;"></td>
                                    <td style="width:30%;">
                                        <div style="border:1px solid #353535;  padding-left:10px; ">
                                            <table class="topPagination padding_top_btm top_custom_table_tdmiddle" width="100%" border="0" cellpadding="0" cellspacing="0">
                                                <tr>    
                                                    
                                                    
                                                    <td align="left" class="sortBy">
                                                        <b> Sort by:</b>
                                                        <apex:selectList value="{!sortingChoice}" styleClass="ml10" id="sortingBasedOn"  multiselect="false" size="1">
                                                            <apex:selectOptions value="{!sortingBasedOn}"/>
                                                        </apex:selectList>
                                                        <apex:selectList styleClass="sortListAsc ml10" value="{!sortType}"  multiselect="false" size="1">
                                                            <apex:selectOptions value="{!sortingTypeoptions}"/>
                                                        </apex:selectList>
                                                    </td>
                                                    
                                                    <td  align="left" style="text-align:left;">
                                                        <apex:commandButton value="Submit" action="{!refresh}"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                            
                            
                            <!-- <table class="topPagination" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>              
<td align="center" width="34%"><apex:commandButton value="Previous" action="{!Previous}"  status="status" disabled="{!DisablePrevious}" />
<apex:commandButton value="Next" action="{!Next}" status="status" disabled="{!DisableNext}" /></td>
</tr>
</table>   
-->
                            <apex:variable var="inc" value="{!0}"/>
                            <apex:repeat value="{!wrapperList}" var="fileObj">              
                                <apex:variable var="inc" value="{!inc+1}"/>
                                <div class="colBox">
                                    <div class="productImage">
                                        <apex:outputText value="{!fileObj.fileWrap.Thumbnail_Display__c}" escape="false"/>
                                        <!--<img src="{!('http://'+fileObj.Thumbnailurl)}" alt="thumbnail" />  -->
                                    </div>
                                    <div class="productDetails">
                                        <div class="productSelect">
                                            <div class="prodCheckBox">
                                                <apex:inputCheckbox value="{!fileObj.isSelected}" styleClass="childs"/>
                                            </div>
                                        </div>
                                        <div class="productDetailsList">
                                            <div class="productName">
                                                <apex:outputlink value="/{!fileObj.fileWrap.Id}" target="_blank" >{!fileObj.fileWrap.Name}</apex:outputlink>
                                            </div>
                                            <ul>
                                                <li>
                                                    <span>File Type:</span>{!fileObj.fileWrap.File_Type__c}
                                                </li>
                                                <li>
                                                    <span>Status:</span>{!fileObj.fileWrap.Status__c}
                                                </li>
                                                <li>
                                                    <span>Operator InCharge:</span>{!fileObj.memWrap.Name}
                                                </li>
                                                <li>
                                                    <span>Job Name:</span>
                                                    <span class="productNameLable">{!fileObj.jobTitles}</span>
                                                    
                                                    <script type="text/javascript">         
                                                    var cont = $('.pbBody').find('.productNameLable');
                                                    $('.pbBody').tooltip({
                                                        items: '.productNameLable',
                                                        track: true,
                                                        content: function(){
                                                            return $(this).html();
                                                        }
                                                    });    
                                                    </script>
                                                    
                                                </li>
                                                <li>
                                                    <span>Job Type:</span>{!fileObj.fileWrap.Job_Type__c}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>      
                            </apex:repeat>  
                        </apex:outputPanel> 
                        <apex:outputPanel rendered="{!IF(wrapperList.size > 0,true,false)}" > 
                            <div class="paginationNav">
                                <table class="pagefooter" width="100%" border="0" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <apex:actionFunction name="show" action="{!refresh}"/><!-- reRender="pageOrderFiles" -->
                                        <td width="33%" align="left" class="lefttd">Display&nbsp;<apex:selectList value="{!setUserChoice}"  multiselect="false" size="1" onchange=" setWinSize(); show();">
                                            <apex:selectOptions value="{!items}"/>
                                            </apex:selectList>&nbsp; records per page  &nbsp; &nbsp;
                                            <td width="13%" id="count" >  <apex:outputText id="myPlaceholder2" value="0"/>&nbsp;&nbsp; Records Selected </td> </td>
                                <td width="34%"><apex:commandButton value="Previous" action="{!Previous}"  status="status" disabled="{!DisablePrevious}" />
                                    <apex:commandButton value="Next" action="{!Next}" status="status" disabled="{!DisableNext}" /></td>
                                
                                <apex:actionStatus id="status" startText="Please Wait..."/>
                                <apex:actionFunction name="show2" action="{!refreshPageRecords}"/> <!--   -->
                                <td width="33%" align="right" class="NOFPage"> Page &nbsp; <apex:inputText value="{!newFileForPageCount}" onchange="show2()" onkeydown="if(event.keyCode==13){this.blur();show2();}"/> &nbsp;  Of &nbsp;  <apex:outputText label="Total" value="{!noOfPages}" escape="false"/></td>
                                <!-- <input name="" type="text" value="{!currentPage}"/> -->
                            </tr>
                        </table>
                    </div>
                </apex:outputPanel>
            </apex:outputPanel>  
        </div>
    </apex:pageBlock>
</td>  
</tr>
</table>  
<apex:actionFunction name="DisplayGridAction" action="{!DisplayGrid}"  />
<apex:actionFunction name="DisplayListAction" action="{!DisplayList}" />
</body>
</html>
</apex:form>
</apex:page>